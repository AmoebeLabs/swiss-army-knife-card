#
# View			: view-sake8
# Project   : Home Assistant / Swiss Army Knife custom card.
# Repository: https://github.com/AmoebeLabs/
#
# Author    : Mars @ AmoebeLabs.com
# 
# License   : CC BY-SA, https://creativecommons.org/licenses/by/4.0/
#
# -----
# Description:
# SAK Example #9. Some homekit alike visualisation card. Again.. But now using
# classes and showing switches/lights etc.
#
# Refs:
#   
###############################################################################

title: SAKE9
path: sake9
panel: false
theme: 'NM - Gonsboro'
cards:
#------------------------------------------------------------------------------
- type: vertical-stack
  cards:
# =================================
    - type: horizontal-stack
      cards:
        # 
        # First ROW, first card
        #
        #######################################################################

        - type: 'custom:dev-swiss-army-knife-card'
          entities:
            - entity: weather.zoefdehaas
              attribute: pressure
              decimals: 0
              unit: 'hPa'
              icon: mdi:gauge
              area: 'Tha Moon'
              name: 'Pressure'
            - entity: weather.zoefdehaas
              secondary_info: last_updated
              format: relative

          # Define aspect ratio as square
          aspectratio: 1/1

          disable_card: false

          dev:
            debug: false
            
          layout:
            styles:
              card:
              toolsets:
              
            toolsets:
              # ==============================================================================
              - toolset: homekit-sensor
                position:
                  cx: 50
                  cy: 50
                tools:
                  - type: rectex
                    position:
                      cx: 40
                      cy: 22.5
                      width: 60
                      height: 25
                      radius:
                        top: 5
                        bottom: 0
                    entity_index: 0
                    styles:
                      rectex:
                        fill: var(--primary-text-color)

                  - type: state
                    position:
                      cx: 40
                      cy: 22.5
                    entity_index: 0
                    styles:
                      state:
                        text-anchor: middle
                        font-size: 13em
                        font-weight: 700
                        fill: var(--primary-background-color)
                      uom:
                        fill: var(--primary-background-color)
                        font-weight: 700

                  - type: name
                    position:
                      cx: 10
                      cy: 55
                    entity_index: 0
                    classes:
                      name:
                        homekit-name__name: true

                  - type: area
                    position:
                      cx: 10
                      cy: 70
                    entity_index: 0
                    classes:
                      area:
                        homekit-area__area: true

                  - type: state
                    position:
                      cx: 10
                      cy: 85
                    entity_index: 1
                    styles:
                      state:
                        text-anchor: start
                        font-size: 8em
                        font-weight: 700
                        fill: var(--primary-text-color)
                      uom:
                        fill: var(--primary-text-color)
                        font-weight: 700

        # 
        # First ROW, second card
        #
        #######################################################################

        - type: 'custom:dev-swiss-army-knife-card'
          entities:
            - entity: weather.zoefdehaas
              attribute: temperature
              decimals: 1
              unit: 'Â°C'
              icon: mdi:thermometer
              area: 'Tha Moon'
              name: 'Temperature'
            - entity: weather.zoefdehaas
              secondary_info: last_updated
              format: relative

          # Define aspect ratio as square
          aspectratio: 1/1

          disable_card: false

          dev:
            debug: false
            
          layout:
            styles:
              card:
              toolsets:
              
            toolsets:
              # ==============================================================================
              - toolset: homekit-sensor
                position:
                  cx: 50
                  cy: 50
                tools:
                  - type: rectex
                    position:
                      cx: 40
                      cy: 22.5
                      width: 60
                      height: 25
                      radius:
                        top: 5
                        bottom: 0
                    entity_index: 0
                    styles:
                      rectex:
                        fill: var(--primary-text-color)

                  - type: state
                    position:
                      cx: 40
                      cy: 22.5
                    entity_index: 0
                    styles:
                      state:
                        text-anchor: middle
                        font-size: 13em
                        font-weight: 700
                        fill: var(--primary-background-color)
                      uom:
                        fill: var(--primary-background-color)
                        font-weight: 700

                  - type: name
                    position:
                      cx: 10
                      cy: 55
                    entity_index: 0
                    classes:
                      name:
                        homekit-name__name: true

                  - type: area
                    position:
                      cx: 10
                      cy: 70
                    entity_index: 0
                    classes:
                      area:
                        homekit-area__area: true

                  - type: state
                    position:
                      cx: 10
                      cy: 85
                    entity_index: 1
                    styles:
                      state:
                        text-anchor: start
                        font-size: 8em
                        font-weight: 700
                        fill: var(--primary-text-color)
                      uom:
                        fill: var(--primary-text-color)
                        font-weight: 700

        # 
        # First ROW, third card
        #
        #######################################################################

        - type: 'custom:dev-swiss-army-knife-card'
          entities:
            - entity: weather.zoefdehaas
              attribute: humidity
              decimals: 0
              unit: '%'
              icon: mdi:water-percent
              area: 'Tha Moon'
              name: 'Humidity'
            - entity: weather.zoefdehaas
              secondary_info: last_updated
              # format: relative, total, date, time, datetime, brightness, duration, precision
              format: relative

          # Define aspect ratio as square
          aspectratio: 1/1

          disable_card: false

          dev:
            debug: false
            
          layout:
            styles:
              card:
              toolsets:
              
            toolsets:
              # ==============================================================================
              - toolset: homekit-sensor
                position:
                  cx: 50
                  cy: 50
                tools:
                  - type: rectex
                    position:
                      cx: 40
                      cy: 22.5
                      width: 60
                      height: 25
                      radius:
                        top: 5
                        bottom: 0
                    entity_index: 0
                    styles:
                      rectex:
                        fill: var(--primary-text-color)

                  - type: state
                    position:
                      cx: 40
                      cy: 22.5
                    entity_index: 0
                    styles:
                      state:
                        text-anchor: middle
                        font-size: 13em
                        font-weight: 700
                        fill: var(--primary-background-color)
                      uom:
                        fill: var(--primary-background-color)
                        font-weight: 700

                  - type: name
                    position:
                      cx: 10
                      cy: 55
                    entity_index: 0
                    classes:
                      name:
                        homekit-name__name: true

                  - type: area
                    position:
                      cx: 10
                      cy: 70
                    entity_index: 0
                    classes:
                      area:
                        homekit-area__area: true

                  - type: state
                    position:
                      cx: 10
                      cy: 85
                    entity_index: 1
                    styles:
                      state:
                        text-anchor: start
                        font-size: 8em
                        font-weight: 700
                        fill: var(--primary-text-color)
                      uom:
                        fill: var(--primary-text-color)
                        font-weight: 700

# =================================
    - type: horizontal-stack
      cards:
        # 
        # Second ROW, first card
        #
        #######################################################################

        - type: 'custom:dev-swiss-army-knife-card'
          entities:
            - entity: binary_sensor.livingroom_movement_occupancy
              name: 'Movement'
              area: 'Livingroom'
            - entity: binary_sensor.livingroom_movement_occupancy
              secondary_info: last_changed
              format: relative

          # Define aspect ratio as square
          aspectratio: 1/1

          disable_card: false

          dev:
            debug: false
            
          layout:
            styles:
              card:
              toolsets:
              
            toolsets:
              # ==============================================================================
              - toolset: homekit-state
                position:
                  cx: 50
                  cy: 50
                tools:
                  # Background used for active / inactive card
                  - type: rectex
                    position:
                      cx: 50
                      cy: 50
                      width: 100
                      height: 100
                      radius:
                        top: 0
                        bottom: 0
                    entity_index: 0
                    animations:
                      - state: 'on'
                        classes:
                          rectex:
                            sak-card--on: true
                      - state: 'off'
                        classes:
                          rectex:
                            sak-card--off: true

                  # Background used for animations & state
                  - type: rectex
                    position:
                      cx: 50
                      cy: 40
                      width: 90
                      height: 5
                      radius:
                        top: 0
                        bottom: 2
                    entity_index: 0
                    
                    # Let background go to white with 70% opacity when movement detected
                    # Use animation to 'flash' the background for a few seconds to get
                    # the attention of the user, if anyone is watching ;-)
                    animations:
                      - state: 'on'
                        classes:
                          rectex:
                            sak-alert--active: true
                        # styles:
                          # rectex:
                            # fill: var(--md-bg-color)
                            # opacity: 0.7
                            # animation: flash 2s ease-in-out both
                      - state: 'off'
                        classes:
                          rectex:
                            sak-alert--clear: true
                    # styles:
                      # rectex:
                        # opacity: 0
                        # fill: none

                  - type: icon
                    position:
                      cx: 22.5
                      cy: 22.5
                      align: center
                      icon_size: 27.5
                    entity_index: 0
                    # Define colors for the icon depending on the state
                    # Note that we have to define both on and off states, as for some reason
                    # the default styling (in case of 'off' state keeps the color of the 'on'
                    # state (unexpected...)
                    #
                    # The icon animation ONLY works in Safari. This is due to the fact that
                    # Safari has a different render path than Chrome. This will be fixed 
                    # in the future of course ;-)
                    animations:
                      - state: 'on'
                        styles:
                          icon:
                            # fill: 'darkorange'
                            # color: 'darkorange'
                            fill: var(--md-fg-color--alert)
                            color: var(--md-fg-color--alert)
                            animation: jello 2s ease-in-out both
                      - state: 'off'
                        styles:
                          icon:
                            fill: var(--primary-text-color)
                            color: var(--primary-text-color)
                    styles:
                      icon:
                        fill: var(--primary-text-color)
                        color: var(--primary-text-color)

                  - type: name
                    position:
                      cx: 10
                      cy: 55
                    entity_index: 0
                    classes:
                      name:
                        homekit-name__name: true

                  - type: area
                    position:
                      cx: 10
                      cy: 70
                    entity_index: 0
                    classes:
                      area:
                        homekit-area__area: true

                  - type: state
                    position:
                      cx: 10
                      cy: 85
                    entity_index: 1
                    styles:
                      state:
                        text-anchor: start
                        font-size: 8em
                        font-weight: 700
                        # fill: var(--primary-text-color)
                        fill: var(--md-fg-color)
                      uom:
                        # fill: var(--primary-text-color)
                        fill: var(--md-fg-color)
                        font-weight: 700

        # 
        # Second ROW, second card
        #
        #######################################################################

        - type: 'custom:dev-swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
            - entity: sensor.u_s_air_pollution_level

          # Define aspect ratio as square
          aspectratio: 1/1

          disable_card: false

          dev:
            debug: false
            
          layout:
            styles:
              card:
              toolsets:
              
            toolsets:
              # ==============================================================================
              - toolset: homekit-state
                position:
                  cx: 50
                  cy: 50
                tools:
                  - type: rectex
                    position:
                      cx: 50
                      cy: 20
                      width: 90
                      height: 30
                      radius:
                        top: 5
                        bottom: 0
                    entity_index: 0
                    styles:
                      rectex:
                        fill: var(--primary-text-color)

                  - type: rectex
                    position:
                      cx: 10
                      cy: 20
                      width: 5
                      height: 25
                      radius:
                        all: 0
                        top_left: 2
                    entity_index: 0
                    show:
                      style: colorstops
                    colorstops:
                      fill: true
                      colors:
                        0: '#A8E05F'
                        51: '#FDD74B'
                        101: '#FE9B57'
                        151: '#FE6A69'
                        201: '#A97ABC'
                        301: '#A87383'
                    styles:
                      rectex:
                        fill: grey

                  - type: rectex
                    position:
                      cx: 50
                      cy: 40
                      width: 90
                      height: 5
                      radius:
                        top: 0
                        bottom: 2
                    entity_index: 0
                    # show:
                      # style: colorstops
                    # colorstops:
                      # fill: true
                      # colors:
                        # 0: '#A8E05F'
                        # 51: '#FDD74B'
                        # 101: '#FE9B57'
                        # 151: '#FE6A69'
                        # 201: '#A97ABC'
                        # 301: '#A87383'
                    styles:
                      rectex:
                        fill: grey

                  - type: state
                    position:
                      cx: 20
                      cy: 20
                    entity_index: 0
                    styles:
                      state:
                        text-anchor: start
                        font-size: 16em
                        font-weight: 700
                        fill: var(--primary-background-color)
                      uom:
                        fill: var(--primary-background-color)
                        font-weight: 700

                  - type: icon
                    position:
                      cx: 80
                      cy: 20
                      align: center
                      icon_size: 22.5
                    entity_index: 1
                    styles:
                      icon:
                        fill: var(--primary-background-color)
                        color: var(--primary-background-color)

                  # - type: bar
                    # id: 1
                    # entity_index: 0
                    # position:
                      # orientation: vertical
                      # cx: 75
                      # cy: 22.5
                      # width: 35
                      # height: 25
                      # margin: .5
                    # hours: 24
                    # barhours: 2
                    # show:
                      # style: 'minmaxgradient'
                    # minmaxgradient:
                      # colors:
                        # min: grey
                        # max: darkgrey
                    # styles:
                      # bar:
                        # stroke-linecap: butt

                  - type: name
                    position:
                      cx: 5
                      cy: 55
                    entity_index: 0
                    classes:
                      name:
                        homekit-name__name: true

                  - type: area
                    position:
                      cx: 5
                      cy: 70
                    entity_index: 0
                    classes:
                      area:
                        homekit-area__area: true
                    # Example that a style 'overwrites' the class styles.
                    # Set font-weight to 300 instead of the default 700 as defined by the
                    # class homekit-area__area!!
                    styles:
                      area:
                        font-weight: 400

        # 
        # Second ROW, third card
        #
        #######################################################################

        - type: 'custom:dev-swiss-army-knife-card'
          entities:
            - entity: light.livingroom_light_duo_right_light
              name: Duo Rechts
              area: Woonkamer
              icon: mdi:floor-lamp-dual
              tap_action:
                action: call-service
                service: light.toggle
                service_data: { "entity_id" : "light.livingroom_light_duo_right_light" }
                haptic: light

            - entity: light.livingroom_light_duo_right_light
              name: Duo Rechts
              area: Woonkamer
              icon: mdi:floor-lamp-dual
              attribute: brightness
              unit_of_measurement: "%"
              tap_action:
                action: more-info
                haptic: success

          # Define aspect ratio as square
          aspectratio: 1/1

          disable_card: false

          dev:
            debug: false
            
          layout:
            styles:
              card:
              toolsets:
              
            toolsets:
              # ==============================================================================
              - toolset: homekit-state
                position:
                  cx: 50
                  cy: 50
                tools:
                  # Background used for active / inactive card
                  - type: rectex
                    position:
                      cx: 50
                      cy: 50
                      width: 100
                      height: 100
                      radius:
                        top: 0
                        bottom: 0
                    entity_index: 0
                    animations:
                      - state: 'on'
                        classes:
                          rectex:
                            sak-card--on: true
                      - state: 'off'
                        classes:
                          rectex:
                            sak-card--off: true

                  - type: rectex
                    position:
                      cx: 50
                      cy: 20
                      width: 90
                      height: 30
                      radius:
                        top: 5
                        bottom: 0
                    entity_index: 0
                    styles:
                      rectex:
                        fill: var(--primary-text-color)

                  - type: rectex
                    position:
                      cx: 10
                      cy: 20
                      width: 5
                      height: 25
                      radius:
                        all: 0
                        top_left: 2
                    entity_index: 0
                    # show:
                      # style: colorstops
                    # colorstops:
                      # fill: true
                      # colors:
                        # 0: '#A8E05F'
                        # 51: '#FDD74B'
                        # 101: '#FE9B57'
                        # 151: '#FE6A69'
                        # 201: '#A97ABC'
                        # 301: '#A87383'
                    styles:
                      rectex:
                        fill: grey

                  - type: rectex
                    position:
                      cx: 50
                      cy: 40
                      width: 90
                      height: 5
                      radius:
                        top: 0
                        bottom: 2
                    entity_index: 0
                    animations:
                      - state: 'on'
                        classes:
                          rectex:
                            sak-switch--on: true
                        # styles:
                          # rectex:
                            # fill: var(--md-bg-color)
                            # opacity: 0.7
                            # animation: flash 2s ease-in-out both
                      - state: 'off'
                        classes:
                          rectex:
                            sak-switch--off: true
                    # show:
                      # style: colorstops
                    # colorstops:
                      # fill: true
                      # colors:
                        # 0: '#A8E05F'
                        # 51: '#FDD74B'
                        # 101: '#FE9B57'
                        # 151: '#FE6A69'
                        # 201: '#A97ABC'
                        # 301: '#A87383'
                    # styles:
                      # rectex:
                        # fill: grey

                  # - type: state
                    # position:
                      # cx: 20
                      # cy: 20
                    # entity_index: 0
                    # styles:
                      # state:
                        # text-anchor: start
                        # font-size: 16em
                        # font-weight: 700
                        # fill: var(--primary-background-color)
                      # uom:
                        # fill: var(--primary-background-color)
                        # font-weight: 700

                  - type: icon
                    position:
                      cx: 30
                      cy: 20
                      align: center
                      icon_size: 22.5
                    entity_index: 0
                    styles:
                      icon:
                        fill: var(--primary-background-color)
                        color: var(--primary-background-color)

                  - type: name
                    position:
                      cx: 5
                      cy: 55
                    entity_index: 0
                    classes:
                      name:
                        homekit-name__name: true

                  - type: area
                    position:
                      cx: 5
                      cy: 70
                    entity_index: 0
                    classes:
                      area:
                        homekit-area__area: true
                    # Example that a style 'overwrites' the class styles.
                    # Set font-weight to 300 instead of the default 700 as defined by the
                    # class homekit-area__area!!
                    styles:
                      area:
                        font-weight: 400

              - toolset: slidertest3
                position:
                  cx: 50
                  cy: 55
                tools:
                  - type: slider2
                    descr: '#3 test slider'
                    position:
                      cx: 50
                      cy: 81
                      capture:
                        width: 90
                        height: 10
                      track:
                        width: 90
                        height: 4
                        radius: 1
                      thumb:
                        width: 5
                        height: 5
                        radius: 2.5
                      label:
                        # placement can be none, thumb, position (cx,cy)
                        placement: position
                        cx: 70
                        cy: 15
                    entity_index: 1
                    derived_entity:
                      input : '[[[ return state ]]]'
                      state: >
                        [[[
                          if (typeof(entity) === 'undefined') return;
                          if (typeof(state) === 'undefined') return;
                          
                          var bri = Math.round(state / 2.55);
                          return (bri ? bri : '0');
                        ]]]
                      unit: >
                        [[[
                          if (typeof(state) === 'undefined') return undefined;
                          return '%';
                        ]]]
                    slider_action:
                      service: light.turn_on
                      parameter: brightness_pct
                    scale:
                      min: 1
                      max: 100
                      step: 1
                      steps: '[1,2,5,6,7,8,9,20]'
                      stepsnew:
                        - stop: 0
                          step: 1
                        - stop: 10
                          step: 5
                    styles:
                      label:
                        text-anchor: middle
                        font-size: 15em
                        font-weight: 600
                        fill: var(--primary-background-color)
                      uom:
                        fill: var(--primary-background-color)
                      track:
                        fill: grey #url(#light-color-temperature-gradient)
                        fill-opacity: 1
                        stroke-width: 0.1em
                        stroke: white
                      thumb:
                        stroke-width: 1.2em
                        stroke: var(--primary-background-color)
                        stroke-opacity: 1
                        fill: var(--primary-text-color)
                        fill-opacity: 0.8

# =================================
    - type: horizontal-stack
      cards:
        # 
        # Third ROW, first card
        #
        #######################################################################

        - type: 'custom:dev-swiss-army-knife-card'
          entities:
            - entity: binary_sensor.livingroom_movement_occupancy
              name: 'Movement'
              area: 'Livingroom'
            - entity: binary_sensor.livingroom_movement_occupancy
              secondary_info: last_changed
              format: relative

          # Define aspect ratio as square
          aspectratio: 1/1

          disable_card: false

          dev:
            debug: false
            
          layout:
            styles:
              card:
              toolsets:
              
            toolsets:
              # ==============================================================================
              - toolset: homekit-state
                position:
                  cx: 50
                  cy: 50
                tools:
                  # Background used for active / inactive card
                  - type: rectex
                    position:
                      cx: 50
                      cy: 50
                      width: 100
                      height: 100
                      radius:
                        top: 0
                        bottom: 0
                    entity_index: 0
                    animations:
                      - state: 'on'
                        classes:
                          rectex:
                            sak-card--on: true
                      - state: 'off'
                        classes:
                          rectex:
                            sak-card--off: true

                  # Background used for animations & state
                  - type: rectex
                    position:
                      cx: 20
                      cy: 20
                      width: 50
                      height: 45
                      radius:
                        all: 0
                        bottom_right: 10
                    entity_index: 0
                    animations:
                      - state: 'on'
                        classes:
                          rectex:
                            sak-alert2--active: true
                      - state: 'off'
                        classes:
                          rectex:
                            sak-alert2--clear: true
                    styles:
                      rectex:
                        stroke-width: 15
                        fill: var(--primary-text-color)

                  - type: icon
                    position:
                      cx: 22.5
                      cy: 22.5
                      align: center
                      icon_size: 27.5
                    entity_index: 0
                    # Define colors for the icon depending on the state
                    # Note that we have to define both on and off states, as for some reason
                    # the default styling (in case of 'off' state keeps the color of the 'on'
                    # state (unexpected...)
                    #
                    # The icon animation ONLY works in Safari. This is due to the fact that
                    # Safari has a different render path than Chrome. This will be fixed 
                    # in the future of course ;-)
                    animations:
                      - state: 'on'
                        styles:
                          icon:
                            fill: var(--md-fg-color--alert)
                            color: var(--md-fg-color--alert)
                            animation: jello 2s ease-in-out both
                      - state: 'off'
                        styles:
                          icon:
                            fill: var(--primary-background-color)
                            color: var(--primary-background-color)
                    styles:
                      icon:
                        fill: var(--primary-background-color)
                        color: var(--primary-background-color)

                  - type: name
                    position:
                      cx: 10
                      cy: 55
                    entity_index: 0
                    classes:
                      name:
                        homekit-name__name: true

                  - type: area
                    position:
                      cx: 10
                      cy: 70
                    entity_index: 0
                    classes:
                      area:
                        homekit-area__area: true

                  - type: state
                    position:
                      cx: 10
                      cy: 85
                    entity_index: 1
                    styles:
                      state:
                        text-anchor: start
                        font-size: 8em
                        font-weight: 700
                        # fill: var(--primary-text-color)
                        fill: var(--md-fg-color)
                      uom:
                        # fill: var(--primary-text-color)
                        fill: var(--md-fg-color)
                        font-weight: 700

        # 
        # Third ROW, second card
        #
        #######################################################################

        - type: 'custom:dev-swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
            - entity: sensor.u_s_air_pollution_level

          # Define aspect ratio as square
          aspectratio: 1/1

          disable_card: false

          dev:
            debug: false
            
          layout:
            styles:
              card:
              toolsets:
              
            toolsets:
              # ==============================================================================
              - toolset: homekit-state
                position:
                  cx: 50
                  cy: 50
                tools:
                  # Background used for animations & state
                  - type: rectex
                    position:
                      cx: 20
                      cy: 20
                      width: 50
                      height: 45
                      radius:
                        all: 0
                        bottom_right: 10
                    entity_index: 0
                    styles:
                      rectex:
                        stroke-width: 15
                        stroke: lightgrey
                        # stroke: url(#light-color-temperature-gradient)
                        fill: var(--primary-text-color)

                  - type: rectex
                    position:
                      cx: 80
                      cy: 20
                      width: 50
                      height: 45
                      radius:
                        all: 0
                        bottom_left: 10
                    entity_index: 0
                    show:
                      style: colorstops
                    colorstops:
                      stroke: true
                      colors:
                        0: '#A8E05F'
                        51: '#FDD74B'
                        101: '#FE9B57'
                        151: '#FE6A69'
                        201: '#A97ABC'
                        301: '#A87383'
                    styles:
                      rectex:
                        stroke-width: 15
                        fill: var(--primary-text-color)

                  # - type: rectex
                    # position:
                      # cx: 50
                      # cy: 40
                      # width: 90
                      # height: 5
                      # radius:
                        # top: 0
                        # bottom: 2
                    # entity_index: 0
                    # show:
                      # style: colorstops
                    # colorstops:
                      # fill: true
                      # colors:
                        # 0: '#A8E05F'
                        # 51: '#FDD74B'
                        # 101: '#FE9B57'
                        # 151: '#FE6A69'
                        # 201: '#A97ABC'
                        # 301: '#A87383'
                    # styles:
                      # rectex:
                        # fill: grey

                  - type: state
                    position:
                      cx: 80
                      cy: 20
                    entity_index: 0
                    styles:
                      state:
                        text-anchor: middle
                        font-size: 14em
                        font-weight: 700
                        fill: var(--primary-background-color)
                      uom:
                        fill: var(--primary-background-color)
                        font-weight: 700

                  - type: icon
                    position:
                      cx: 20
                      cy: 20
                      align: center
                      icon_size: 22.5
                    entity_index: 1
                    styles:
                      icon:
                        fill: var(--primary-background-color)
                        color: var(--primary-background-color)

                  # - type: bar
                    # id: 1
                    # entity_index: 0
                    # position:
                      # orientation: vertical
                      # cx: 75
                      # cy: 22.5
                      # width: 35
                      # height: 25
                      # margin: .5
                    # hours: 24
                    # barhours: 2
                    # show:
                      # style: 'minmaxgradient'
                    # minmaxgradient:
                      # colors:
                        # min: grey
                        # max: darkgrey
                    # styles:
                      # bar:
                        # stroke-linecap: butt

                  - type: name
                    position:
                      cx: 5
                      cy: 55
                    entity_index: 0
                    classes:
                      name:
                        homekit-name__name: true

                  - type: area
                    position:
                      cx: 5
                      cy: 70
                    entity_index: 0
                    classes:
                      area:
                        homekit-area__area: true
                    # Example that a style 'overwrites' the class styles.
                    # Set font-weight to 300 instead of the default 700 as defined by the
                    # class homekit-area__area!!
                    styles:
                      area:
                        font-weight: 400

        # 
        # Third ROW, third card
        #
        #######################################################################

        - type: 'custom:dev-swiss-army-knife-card'
          entities:
            - entity: light.livingroom_light_duo_right_light
              name: Duo Rechts
              area: Woonkamer
              icon: mdi:floor-lamp-dual
              tap_action:
                action: call-service
                service: light.toggle
                service_data: { "entity_id" : "light.livingroom_light_duo_right_light" }
                haptic: light

            - entity: light.livingroom_light_duo_right_light
              name: Duo Rechts
              area: Woonkamer
              icon: mdi:floor-lamp-dual
              attribute: brightness
              unit_of_measurement: "%"
              tap_action:
                action: more-info
                haptic: success

          # Define aspect ratio as square
          aspectratio: 1/1

          disable_card: false

          dev:
            debug: false
            
          layout:
            styles:
              card:
              toolsets:
              
            toolsets:
              # ==============================================================================
              - toolset: homekit-state
                position:
                  cx: 50
                  cy: 50
                tools:
                  # Background used for active / inactive card
                  - type: rectex
                    position:
                      cx: 50
                      cy: 50
                      width: 100
                      height: 100
                      radius:
                        top: 0
                        bottom: 0
                    entity_index: 0
                    animations:
                      - state: 'on'
                        classes:
                          rectex:
                            sak-card--on: true
                      - state: 'off'
                        classes:
                          rectex:
                            sak-card--off: true

                  - type: rectex
                    position:
                      cx: 20
                      cy: 20
                      width: 50
                      height: 45
                      radius:
                        all: 0
                        bottom_right: 10
                    entity_index: 0
                    animations:
                      - state: 'on'
                        classes:
                          rectex:
                            sak-switch2--on: true
                      - state: 'off'
                        classes:
                          rectex:
                            sak-switch2--off: true
                    styles:
                      rectex:
                        stroke-width: 15
                        fill: var(--primary-text-color)

                  - type: icon
                    position:
                      cx: 20
                      cy: 20
                      align: center
                      icon_size: 22.5
                    entity_index: 0
                    styles:
                      icon:
                        fill: var(--primary-background-color)
                        color: var(--primary-background-color)

                  - type: rectex
                    position:
                      cx: 80
                      cy: 20
                      width: 50
                      height: 45
                      radius:
                        all: 0
                        bottom_left: 10
                    entity_index: 0
                    styles:
                      rectex:
                        stroke-width: 15
                        fill: var(--primary-text-color)
                        stroke: lightgrey

                  - type: name
                    position:
                      cx: 5
                      cy: 55
                    entity_index: 0
                    classes:
                      name:
                        homekit-name__name: true

                  - type: area
                    position:
                      cx: 5
                      cy: 70
                    entity_index: 0
                    classes:
                      area:
                        homekit-area__area: true
                    # Example that a style 'overwrites' the class styles.
                    # Set font-weight to 300 instead of the default 700 as defined by the
                    # class homekit-area__area!!
                    styles:
                      area:
                        font-weight: 400

              - toolset: slidertest3
                position:
                  cx: 50
                  cy: 55
                tools:
                  - type: slider2
                    descr: '#3 test slider'
                    position:
                      cx: 50
                      cy: 81
                      capture:
                        width: 90
                        height: 10
                      track:
                        width: 90
                        height: 4
                        radius: 1
                      thumb:
                        width: 5
                        height: 5
                        radius: 2.5
                      label:
                        # placement can be none, thumb, position (cx,cy)
                        placement: position
                        cx: 80
                        cy: 15
                    entity_index: 1
                    derived_entity:
                      input : '[[[ return state ]]]'
                      state: >
                        [[[
                          if (typeof(entity) === 'undefined') return;
                          if (typeof(state) === 'undefined') return;
                          
                          var bri = Math.round(state / 2.55);
                          return (bri ? bri : '0');
                        ]]]
                      unit: >
                        [[[
                          if (typeof(state) === 'undefined') return undefined;
                          return '%';
                        ]]]
                    slider_action:
                      service: light.turn_on
                      parameter: brightness_pct
                    scale:
                      min: 1
                      max: 100
                      step: 1
                      steps: '[1,2,5,6,7,8,9,20]'
                      stepsnew:
                        - stop: 0
                          step: 1
                        - stop: 10
                          step: 5
                    styles:
                      label:
                        text-anchor: middle
                        font-size: 15em
                        font-weight: 600
                        fill: var(--primary-background-color)
                      uom:
                        fill: var(--primary-background-color)
                      track:
                        fill: url(#light-brightness-gradient)
                        fill-opacity: 1
                        stroke-width: 0.1em
                        stroke: white
                      thumb:
                        stroke-width: 1.2em
                        stroke: var(--primary-background-color)
                        stroke-opacity: 1
                        fill: var(--primary-text-color)
                        fill-opacity: 0.8

