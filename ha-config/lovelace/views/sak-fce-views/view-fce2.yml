#
# View			: view-functional-card-examples2.yml
# Project   : Home Assistant / Swiss Army Knife custom card.
# Repository: https://github.com/AmoebeLabs/swiss-army-knife-card
#
# Author    : Mars @ AmoebeLabs.com
# 
# License   : CC BY-SA, https://creativecommons.org/licenses/by/4.0/
#
# -----
# Description:
#
# Refs:
#   
################################################################################

title: FCE2
path: fce2
panel: false
cards:
  - type: vertical-stack
    cards:
    - type: grid
      columns: 2
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_carbon_dioxide
              name: 'CO2'
              area: 'Study'
          layout:
            template:
              name: sak_layout_fce2_awair2a
              variables:
                - sak_layout_awair_background_icon_disabled: false
                - sak_layout_awair_sensor_colorstop_v1: sak_colorstops_awair_co2_v1
                - sak_layout_awair_sensor_colorstop_v2: sak_colorstops_awair_co2_v2
                - sak_layout_awair_sensor_scale_max: 3000

          # -------------------------------------------------------------------
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Study'
          layout:
            template:
              name: sak_layout_fce2_awair2a
              variables:
                - sak_layout_awair_chart_type: area
                - sak_layout_awair_background_icon_disabled: false
                - sak_layout_awair_sensor_colorstop_v1: sak_colorstops_awair_voc_v1
                - sak_layout_awair_sensor_colorstop_v2: sak_colorstops_awair_voc_v2
                - sak_layout_awair_sensor_scale_max: 8500
      # ================================================================
    - type: grid
      columns: 2
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_humidity
              name: 'Humidity'
              area: 'Study'
              decimals: 0
          layout:
            template:
              name: sak_layout_fce2_awair2a
              variables:
                - sak_layout_awair_chart_type: barcode
                - sak_layout_awair_chart_variant: audio
                - sak_layout_awair_background_icon_disabled: false
                - sak_layout_awair_sensor_colorstop_v1: sak_colorstops_awair_humidity_v1
                - sak_layout_awair_sensor_colorstop_v2: sak_colorstops_awair_humidity_v2
                - sak_layout_awair_sensor_scale_max: 100

          # -------------------------------------------------------------------
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_pm2_5
              name: 'PM2.5'
              area: 'Study'
              icon: mdi:dots-hexagon
          layout:
            template:
              name: sak_layout_fce2_awair2a
              variables:
                - sak_layout_awair_chart_type: line
                - sak_layout_awair_background_icon_disabled: false
                - sak_layout_awair_sensor_colorstop_v1: sak_colorstops_awair_pm25_v1
                - sak_layout_awair_sensor_colorstop_v2: sak_colorstops_awair_pm25_v2
                - sak_layout_awair_sensor_scale_max: 100
      # ================================================================
    - type: grid
      columns: 2
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_humidity
              name: 'Humidity'
              area: 'Study'
              decimals: 0
          layout:
            template:
              name: sak_layout_fce2_awair2a
              variables:
                - sak_layout_awair_chart_type: bar
                - sak_layout_awair_background_icon_disabled: false
                - sak_layout_awair_sensor_colorstop_v1: sak_colorstops_awair_humidity_v1
                - sak_layout_awair_sensor_colorstop_v2: sak_colorstops_awair_humidity_v2
                - sak_layout_awair_sensor_scale_max: 100

          # -------------------------------------------------------------------
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_pm2_5
              name: 'PM2.5'
              area: 'Study'
              icon: mdi:dots-hexagon
          layout:
            template:
              name: sak_layout_fce2_awair2a
              variables:
                - sak_layout_awair_chart_type: dots
                - sak_layout_awair_background_icon_disabled: false
                - sak_layout_awair_sensor_colorstop_v1: sak_colorstops_awair_pm25_v1
                - sak_layout_awair_sensor_colorstop_v2: sak_colorstops_awair_pm25_v2
                - sak_layout_awair_sensor_scale_max: 100
      # ================================================================
    - type: grid
      columns: 2
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_score
              name: 'Awair Element'
              area: 'Study'
            - entity: sensor.awair_element_study_temperature
              name: 'Temp'
              area: 'Study'
            - entity: sensor.awair_element_study_humidity
              name: 'Humidity'
              area: 'Study'
              decimals: 0
            - entity: sensor.awair_element_study_carbon_dioxide
              name: 'CO2'
              area: 'Study'
            - entity: sensor.awair_element_study_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Study'
            - entity: sensor.awair_element_study_pm2_5
              name: 'PM2.5'
              area: 'Study'
              icon: mdi:dots-hexagon
          layout:
            template:
              name: sak_layout_fce2_awair3a
          # -------------------------------------------------------------------
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_score
              name: 'Awair Element'
              area: 'Study'
            - entity: sensor.awair_element_study_temperature
              name: 'Temp'
              area: 'Study'
            - entity: sensor.awair_element_study_humidity
              name: 'Humidity'
              area: 'Study'
              decimals: 0
            - entity: sensor.awair_element_study_carbon_dioxide
              name: 'CO2'
              area: 'Study'
            - entity: sensor.awair_element_study_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Study'
            - entity: sensor.awair_element_study_pm2_5
              name: 'PM2.5'
              area: 'Study'
              icon: mdi:dots-hexagon
          layout:
            template:
              name: sak_layout_fce2_awair3b
      # ================================================================
    - type: grid
      columns: 2
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_livingroom_score
              name: 'Awair Element'
              area: 'Livingroom'
            - entity: sensor.awair_element_livingroom_temperature
              name: 'Temp'
              area: 'Livingroom'
            - entity: sensor.awair_element_livingroom_humidity
              name: 'Humidity'
              area: 'Livingroom'
              decimals: 0
            - entity: sensor.awair_element_livingroom_carbon_dioxide
              name: 'CO2'
              area: 'Livingroom'
            - entity: sensor.awair_element_livingroom_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Livingroom'
            - entity: sensor.awair_element_livingroom_pm2_5
              name: 'PM2.5'
              area: 'Livingroom'
              icon: mdi:dots-hexagon
          layout:
            template:
              name: sak_layout_fce2_awair3c
          # -------------------------------------------------------------------
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_bedroom_score
              name: 'Awair Element'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_temperature
              name: 'Temp'
              area: 'bedroom'
            - entity: sensor.awair_element_bedroom_humidity
              name: 'Humidity'
              area: 'Bedroom'
              decimals: 0
            - entity: sensor.awair_element_bedroom_carbon_dioxide
              name: 'CO2'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_pm2_5
              name: 'PM2.5'
              area: 'Bedroom'
              icon: mdi:dots-hexagon
          layout:
            template:
              name: sak_layout_fce2_awair3c

      # ================================================================
    - type: grid
      columns: 1
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.tomorrow_io_zoefdehaas_tree_pollen_index
              area: 'Thuis'
              name: 'Trees'
            - entity: sensor.tomorrow_io_zoefdehaas_grass_pollen_index
              name: 'Grass'
            - entity: sensor.tomorrow_io_zoefdehaas_weed_pollen_index
              name: 'Weed'
          layout:
            template:
              name: sak_layout_fce2_tomorrow_pollen_all_graph_sunburst
              variables:
                - sak_layout_tomorrow_pollen_image_path: tomorrow/

      # ================================================================
    - type: grid
      columns: 1
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.tomorrow_io_zoefdehaas_tree_pollen_index
              area: 'Thuis'
              name: 'Trees'
            - entity: sensor.tomorrow_io_zoefdehaas_grass_pollen_index
              name: 'Grass'
            - entity: sensor.tomorrow_io_zoefdehaas_weed_pollen_index
              name: 'Weed'
          layout:
            template:
              name: sak_layout_fce2_tomorrow_pollen_all_graph_audio
              variables:
                - sak_layout_tomorrow_pollen_image_path: tomorrow/
      # ================================================================
    - type: grid
      columns: 2
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: person.zoefdehaas
              name: 'Person'
              icon: mdi:face-man
            - entity: person.zoefdehaas
              name: 'Person'
              secondary_info: last_changed
              format: time-24h_date-short
          layout:
            template:
              name: sak_layout_fce2_person
              variables:
                - sak_layout_person_zone_entities:
                    - zone.buiten
                    - zone.marco_werk

        ########################################################################

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: person.zoefdehaas
              name: 'Tha Washer'
              icon: mdi:face-man
              entity_picture: "/local/images/clip-test.jpg"
            - entity: person.zoefdehaas
              name: 'Tha Washer'
              secondary_info: last_changed
              format: time-24h_date-short

          layout:
            template:
              name: sak_layout_fce2_person
              variables:
                - sak_layout_person_use_entity_picture: true
                - sak_layout_person_zone_entities:
                    - zone.buiten
                    - zone.marco_werk
      # ========================================================================
    - type: grid
      columns: 2
      square: false
      cards:
        # Third row
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: binary_sensor.livingroom_movement_occupancy
              area: Woonkamer
              name: Beweging
            - entity: binary_sensor.livingroom_movement_occupancy
              secondary_info: last_changed
              format: time-24h_date-short
            - entity: sensor.livingroom_movement_battery
              decimals: 0
            - entity: sensor.livingroom_movement_linkquality
              decimals: 0
          layout:
            template:
              name: sak_layout_fce2_binary1

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: binary_sensor.back_door_contact
              area: Keuken
              name: Achterdeur
            - entity: binary_sensor.back_door_contact
              secondary_info: last_changed
              format: time-24h_date-short
            - entity: sensor.back_door_battery
              decimals: 0
            - entity: sensor.back_door_linkquality
              decimals: 0
          layout:
            template:
              name: sak_layout_fce2_binary1

      # ========================================================================
    - type: grid
      columns: 2
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              area: Huis
              name: Huidig Verbruik
          layout:
            template:
              name: sak_layout_fce2_sensor1

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.studyf_iaq_temperature
              area: Werk Voor
              name: Temperatuur
              decimals: 1
            - entity: sensor.studyf_iaq_battery
              decimals: 0
            - entity: sensor.studyf_iaq_linkquality
              decimals: 0
          layout:
            template:
              name: sak_layout_fce2_sensor3
      # ========================================================================
    - type: grid
      columns: 2
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              area: Huis
              name: Huidig Verbruik
          layout:
            template:
              name: sak_layout_fce2_sensor2

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.studyf_iaq_temperature
              area: Werk Voor
              name: Temperatuur
              decimals: 1
            - entity: sensor.studyf_iaq_battery
              decimals: 0
            - entity: sensor.studyf_iaq_linkquality
              decimals: 0
          layout:
            template:
              name: sak_layout_fce2_sensor2

      # ========================================================================
    - type: grid
      columns: 3
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
          layout:
            template:
              name: sak_layout_fce4_sensor1
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_phase_currently_delivered_l1
          layout:
            template:
              name: sak_layout_fce4_sensor1
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_phase_currently_delivered_l2
          layout:
            template:
              name: sak_layout_fce4_sensor1
              variables:
                - sak_layout_sensor_history_disabled: true

        # Second row
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.studyf_iaq_temperature
              name: Werk Voor
              decimals: 1
          layout:
            template:
              name: sak_layout_fce4_sensor1
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.studyf_iaq_humidity
              name: Werk Voor
              decimals: 0
          layout:
            template:
              name: sak_layout_fce4_sensor1
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.livingroom_movement_illuminance
              name: Werk Voor
          layout:
            template:
              name: sak_layout_fce4_sensor1
              variables:
                - sak_layout_sensor_history_disabled: true

        # Third row
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: binary_sensor.livingroom_movement_occupancy
              name: Woonkamer
          layout:
            template:
              name: sak_layout_fce4_binary1
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: binary_sensor.back_door_contact
              name: Achterdeur
          layout:
            template:
              name: sak_layout_fce4_binary1
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: light.livingroom_light_cupboard_light
              attribute: hs_color
              convert: rgb_hex
            - entity: light.livingroom_light_cupboard_light
              name: LEDs
          layout:
            template:
              name: sak_layout_fce4_light1
      # ========================================================================
    - type: grid
      columns: 1
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            ## Today actual power
            # 0..3
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              # name: 'Total'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l1
              name: 'L1'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l2
              name: 'L2'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l3
              name: 'L3'
            ## Returned actual power
            # 4..6
            - entity: sensor.dsmr_reading_electricity_currently_returned
              name: 'Total'
            - entity: sensor.dsmr_reading_phase_currently_returned_l1
              name: 'L1'
            - entity: sensor.dsmr_reading_phase_currently_returned_l2
              name: 'L2'
            - entity: sensor.dsmr_reading_phase_currently_returned_l3
              name: 'L3'

            ## Today actual energy
            # 7..9
            - entity: sensor.dsmr_day_consumption_electricity_merged
              name: 'Vandaag' #'Today'
              decimals: 2
            - entity: sensor.dsmr_current_month_electricity_merged
              name: 'Deze Maand' #'This Month'
              decimals: 1
            - entity: sensor.dsmr_current_year_electricity_merged
              name: 'Dit Jaar' #'This Year'
              decimals: 0
            ## Returned stuff
            # 10..12
            - entity: sensor.dsmr_day_consumption_electricity_returned_merged
              name: 'Vandaag' #'Today'
              decimals: 2
            - entity: sensor.dsmr_current_month_electricity_returned_merged
              name: 'Deze Maand' #'This Month'
              decimals: 1
            - entity: sensor.dsmr_current_year_electricity_returned_merged
              name: 'Dit Jaar' #'This Year'
              decimals: 0
          layout:
            template:
              name: sak_layout_fce2_electricity5

      # ========================================================================
    - type: grid
      columns: 1
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            ## Today actual power
            # 0..3
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              name: 'Total'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l1
              name: 'L1'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l2
              name: 'L2'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l3
              name: 'L3'
            ## Returned actual power
            # 4..6
            - entity: sensor.dsmr_reading_electricity_currently_returned
              name: 'Total'
            - entity: sensor.dsmr_reading_phase_currently_returned_l1
              name: 'L1'
            - entity: sensor.dsmr_reading_phase_currently_returned_l2
              name: 'L2'
            - entity: sensor.dsmr_reading_phase_currently_returned_l3
              name: 'L3'

            ## Today actual energy
            # 7..9
            - entity: sensor.dsmr_day_consumption_electricity_merged
              name: 'Vandaag' #'Today'
              decimals: 2
            - entity: sensor.dsmr_current_month_electricity_merged
              name: 'Deze Maand' #'This Month'
              decimals: 1
            - entity: sensor.dsmr_current_year_electricity_merged
              name: 'Dit Jaar' #'This Year'
              decimals: 0
            ## Returned stuff
            # 10..12
            - entity: sensor.dsmr_day_consumption_electricity_returned_merged
              name: 'Today'
              decimals: 2
            - entity: sensor.dsmr_current_month_electricity_returned_merged
              name: 'This Month'
              decimals: 1
            - entity: sensor.dsmr_current_year_electricity_returned_merged
              name: 'This Year'
              decimals: 0
          layout:
            template:
              name: sak_layout_fce2_electricity4
      # ========================================================================
    - type: grid
      columns: 1
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            ## Today actual power
            # 0..3
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              name: 'Total'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l1
              name: 'L1'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l2
              name: 'L2'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l3
              name: 'L3'
            ## Returned actual power
            # 4..6
            - entity: sensor.dsmr_reading_electricity_currently_returned
              name: 'Total'
            - entity: sensor.dsmr_reading_phase_currently_returned_l1
              name: 'L1'
            - entity: sensor.dsmr_reading_phase_currently_returned_l2
              name: 'L2'
            - entity: sensor.dsmr_reading_phase_currently_returned_l3
              name: 'L3'

            ## Today actual energy
            # 7..9
            - entity: sensor.dsmr_day_consumption_electricity_merged
              name: 'Today'
              decimals: 2
            - entity: sensor.dsmr_current_month_electricity_merged
              name: 'This Month'
              decimals: 1
            - entity: sensor.dsmr_current_year_electricity_merged
              name: 'This Year'
              decimals: 0
            ## Returned stuff
            # 10..12
            - entity: sensor.dsmr_day_consumption_electricity_returned_merged
              name: 'Today'
              decimals: 2
            - entity: sensor.dsmr_current_month_electricity_returned_merged
              name: 'This Month'
              decimals: 1
            - entity: sensor.dsmr_current_year_electricity_returned_merged
              name: 'This Year'
              decimals: 0
          layout:
            template:
              name: sak_layout_fce2_electricity3    
      # ========================================================================
    - type: grid
      columns: 1
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              name: 'Total'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l1
              name: 'L1'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l2
              name: 'L2'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l3
              name: 'L3'
          layout:
            template:
              name: sak_layout_fce2_electricity2

    - type: grid
      columns: 2
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              name: 'Total'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l1
              name: 'L1'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l2
              name: 'L2'
            - entity: sensor.dsmr_reading_phase_currently_delivered_l3
              name: 'L3'
          aspectratio: 2/1.2
          layout:
            styles:
              card:
            toolsets:
              # ===============================================================
              - toolset: card-title
                position:
                  cx: 20
                  cy: 32.5
                tools:
                  # ------------------------------------------------------------
                  - type: text
                    position:
                      cx: 50
                      cy: 30
                    text: "Electricity Usage"
                    styles:
                      text:
                        text-anchor: start
                        font-size: 10em
                        font-weight: 400
                        opacity: 0.7

              # ===============================================================
              - toolset: graph-phase-total
                position:
                  cx: 30
                  cy: &phase_cy 45
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position: &rectex_phase_pos
                      cx: 50
                      cy: 50
                      width: 30
                      height: 50
                      radius:
                        all: 0
                    styles: &rectex_phase_style
                      rectex:
                        fill: none #var(--theme-sys-elevation-surface-neutral2)
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position: &graph_phase_pos
                      cx: 50
                      cy: 50
                      width: 20
                      height: 40
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                      graded:
                        square: false
                        line_width : 2
                      colorstops_transition: hard
                      colorstops: &graph_phase_colorstops
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 0.150
                            color: 'green'
                          - value: 0.300
                            color: '#FFE37F'  # Yasmine
                          - value: 0.500
                            color: '#FCC449'  # Saffron
                          - value: 1.000
                            color: '#F79F23'  # Orange Peel
                          - value: 1.500
                            color: '#EF7F01'  # Tangerine
                          - value: 2.000
                            color: '#E73F10'  # Cinnabar
                          - value: 2.500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3.000
                            color: '#980C0C'  # Pennu Red
                          - value: 4.000
                            color: '#7B0002'  # Barn Red

                      styles: &trafficlight_phase_styles
                        graded_background:
                          transition: fill 2s ease
                          transform-origin: center
                          transform-box: fill-box
                          transform: skewY(20deg)
                        graded_foreground:
                          transition: fill 2s ease
                          transform-origin: center
                          transform-box: fill-box
                          transform: skewY(20deg)
                  # ------------------------------------------------------------
                  - type: name
                    position: &name_phase_pos
                      cx: 50
                      cy: 85
                    entity_indexes:
                      - entity_index: 0
                    styles:
                      tool:
                      name: &name_phase_styling
                        text-anchor: middle
                        font-size: 10em
                        font-weight: 500
                        opacity: 0.6
                        fill: var(--primary-text-color)
                        transition: opacity 0.5s linear

                  # ------------------------------------------------------------
                  - type: state
                    position: &state_phase_state_pos
                      cx: 50
                      cy: 105
                    entity_indexes:
                      - entity_index: 0
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state: &state_phase_styling
                        text-anchor: middle
                        font-size: 10em
                        font-weight: 600
                        # fill: var(--primary-background-color)
                        transition: opacity 0.5s linear

              # ===============================================================
              - toolset: graph-phase-l1
                position:
                  cx: 85
                  cy: *phase_cy
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position: *rectex_phase_pos
                    styles: *rectex_phase_style
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position: *graph_phase_pos
                    entity_index: 1
                    entity_indexes:
                      - entity_index: 1
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                      graded:
                        square: false
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops: *graph_phase_colorstops
                      styles: *trafficlight_phase_styles

                  # ------------------------------------------------------------
                  - type: name
                    position: *name_phase_pos
                    entity_indexes:
                      - entity_index: 1
                    styles:
                      tool:
                      name: *name_phase_styling
                  # ------------------------------------------------------------
                  - type: state
                    position: *state_phase_state_pos
                    entity_indexes:
                      - entity_index: 1
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state: *state_phase_styling

              # ===============================================================
              - toolset: graph-phase-l2
                position:
                  cx: 125
                  cy: *phase_cy
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position: *rectex_phase_pos
                    styles: *rectex_phase_style

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position: *graph_phase_pos
                    entity_index: 2
                    entity_indexes:
                      - entity_index: 2
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                      graded:
                        square: false
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops: *graph_phase_colorstops
                      styles: *trafficlight_phase_styles
                  # ------------------------------------------------------------
                  - type: name
                    position: *name_phase_pos
                    entity_indexes:
                      - entity_index: 2
                    styles:
                      tool:
                      name: *name_phase_styling
                  # ------------------------------------------------------------
                  - type: state
                    position: *state_phase_state_pos
                    entity_indexes:
                      - entity_index: 2
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state: *state_phase_styling

              # ===============================================================
              - toolset: graph-phase-l3
                position:
                  cx: 165
                  cy: *phase_cy
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position: *rectex_phase_pos
                    styles: *rectex_phase_style

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position: *graph_phase_pos
                    entity_index: 3
                    entity_indexes:
                      - entity_index: 3
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                      graded:
                        square: false
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops: *graph_phase_colorstops
                      styles: *trafficlight_phase_styles

                  # ------------------------------------------------------------
                  - type: name
                    position: *name_phase_pos
                    entity_indexes:
                      - entity_index: 3
                    styles:
                      tool:
                      name: *name_phase_styling
                  # ------------------------------------------------------------
                  - type: state
                    position: *state_phase_state_pos
                    entity_indexes:
                      - entity_index: 3
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state: *state_phase_styling

        # x.2 ============================================================
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              name: 'Total Electricity'
          aspectratio: 2/1
          layout:
            styles:
              card:
            toolsets:
              # ===============================================================
              # - toolset: card-title
              #   position:
              #     cx: 20
              #     cy: 32.5
              #   tools:
              #     # ------------------------------------------------------------
              #     - type: text
              #       position:
              #         cx: 50
              #         cy: 30
              #       text: "Electricity Usage"
              #       styles:
              #         text:
              #           text-anchor: start
              #           font-size: 10em
              #           font-weight: 400
              #           opacity: 0.7

              # ===============================================================
              - toolset: graph-phase-total
                position:
                  cx: 115
                  cy: 47.5
                  rotate: 90
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position:
                      cx: 50
                      cy: 70
                      width: 35
                      height: 140
                      radius:
                        all: 1
                    styles:
                      rectex:
                        fill: var(--theme-sys-elevation-surface-neutral9)
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position:
                      cx: 50
                      cy: 70
                      width: 25
                      height: 130
                      margin:
                        l: 0
                        x: 0
                        y: 0
                        r: 0
                        t: 5
                        b: 35
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                      graded:
                        line_width : 0.5
                        column_spacing: 1
                      colorstops_transition: hard
                      colorstops:
                      # 10 steps green to red
                      # '#009344', 3ca444, 7bb741, b5ca3c
                      # ebda4a, e7bc3d, dc993e
                      # d2773d, c9563f, be343e
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 0.150
                            color: 'green'
                          - value: 0.300
                            color: '#FFE37F'  # Yasmine
                          - value: 0.500
                            color: '#FCC449'  # Saffron
                          - value: 1.000
                            color: '#F79F23'  # Orange Peel
                          - value: 1.500
                            color: '#EF7F01'  # Tangerine
                          - value: 2.000
                            color: '#E73F10'  # Cinnabar
                          - value: 2.500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3.000
                            color: '#980C0C'  # Pennu Red
                          - value: 4.000
                            color: '#7B0002'  # Barn Red
                      styles:
                        # tool:
                        #   transform: rotate(90deg)
                        graded_background:
                          transition: fill 2s ease
                          transform-origin: center
                          transform-box: fill-box
                          transform: skewY(20deg)
                        graded_foreground:
                          transition: fill 2s ease
                          transform-origin: center
                          transform-box: fill-box
                          transform: skewY(20deg)
              # ===============================================================
              - toolset: graph-phase-state
                position:
                  cx: 45
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: name
                    position:
                      cx: 190
                      cy: 35
                    entity_indexes:
                      - entity_index: 0
                    styles:
                      tool:
                      name:
                        text-anchor: end
                        font-size: 12em
                        font-weight: 600
                        opacity: 0.8
                        fill: var(--primary-text-color)
                        transition: opacity 0.5s linear
                  # ------------------------------------------------------------
                  - type: rectex
                    position:
                      cx: 50
                      cy: 50
                      width: 70
                      height: 70
                      radius:
                        all: 25
                    styles:
                      rectex:
                        fill: var(--theme-sys-elevation-surface-neutral9)

                  # ------------------------------------------------------------
                  - type: rectex
                    position:
                      cx: 50
                      cy: 50
                      width: 60
                      height: 60
                      radius:
                        all: 20
                    styles:
                      rectex:
                        fill: var(--primary-background-color)
                  # ------------------------------------------------------------
                  - type: icon
                    position:
                      cx: 50
                      cy: 32.5
                      align: center
                      icon_size: 20
                    entity_index: 0

                  # ------------------------------------------------------------
                  - type: state
                    position:
                      cx: 50
                      cy: 52.5
                    entity_indexes:
                      - entity_index: 0
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state:
                        text-anchor: middle
                        font-size: 16em
                        font-weight: 600
                        # fill: var(--primary-background-color)
                        transition: opacity 0.5s linear

    - type: grid
      columns: 1
      square: false
      cards:
        # x.3 ============================================================
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              name: 'Total Electricity'
          aspectratio: 4/1
          layout:
            styles:
              card:
            toolsets:
              # ===============================================================
              - toolset: graph-phase-total
                position:
                  cx: 115
                  cy: 47.5
                  rotate: 90
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position:
                      cx: 50
                      cy: 70
                      width: 35
                      height: 140
                      radius:
                        all: 1
                    styles:
                      rectex:
                        fill: var(--theme-sys-elevation-surface-neutral9)
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position:
                      cx: 50
                      cy: 70
                      width: 25
                      height: 130
                      margin:
                        l: 0
                        x: 0
                        y: 0
                        r: 0
                        t: 5
                        b: 35
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                      graded:
                        line_width : 0.5
                        row_spacing: 3
                      colorstops_transition: hard
                      colorstops:
                      # 10 steps green to red
                      # '#009344', 3ca444, 7bb741, b5ca3c
                      # ebda4a, e7bc3d, dc993e
                      # d2773d, c9563f, be343e
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 0.150
                            color: 'green'
                          - value: 0.300
                            color: '#FFE37F'  # Yasmine
                          - value: 0.500
                            color: '#FCC449'  # Saffron
                          - value: 1.000
                            color: '#F79F23'  # Orange Peel
                          - value: 1.500
                            color: '#EF7F01'  # Tangerine
                          - value: 2.000
                            color: '#E73F10'  # Cinnabar
                          - value: 2.500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3.000
                            color: '#980C0C'  # Pennu Red
                          - value: 4.000
                            color: '#7B0002'  # Barn Red
                      styles:
                        # tool:
                        #   transform: rotate(90deg)
                        graded_background:
                          transition: fill 2s ease
                          transform-origin: center
                          transform-box: fill-box
                          transform: skewY(20deg)
                        graded_foreground:
                          transition: fill 2s ease
                          transform-origin: center
                          transform-box: fill-box
                          transform: skewY(20deg)
              # ===============================================================
              - toolset: graph-phase-state
                position:
                  cx: 45
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: name
                    position:
                      cx: 190
                      cy: 35
                    entity_indexes:
                      - entity_index: 0
                    styles:
                      tool:
                      name:
                        text-anchor: end
                        font-size: 12em
                        font-weight: 600
                        opacity: 0.8
                        fill: var(--primary-text-color)
                        transition: opacity 0.5s linear
                  # ------------------------------------------------------------
                  - type: circle
                    position:
                      cx: 50
                      cy: 50
                      radius: 32.5      # subtract stroke-width / 2
                    styles:
                      circle:
                        stroke-width: 5em
                        stroke: var(--theme-sys-elevation-surface-neutral9)
                        fill: var(--primary-background-color)
                  # ------------------------------------------------------------
                  - type: icon
                    position:
                      cx: 50
                      cy: 32.5
                      align: center
                      icon_size: 20
                    entity_index: 0

                  # ------------------------------------------------------------
                  - type: state
                    position:
                      cx: 50
                      cy: 52.5
                    entity_indexes:
                      - entity_index: 0
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state:
                        text-anchor: middle
                        font-size: 16em
                        font-weight: 600
                        # fill: var(--primary-background-color)
                        transition: opacity 0.5s linear
              # ===============================================================
              - toolset: graph-phase-state
                position:
                  cx: 300
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 180
                      height: 70
                      margin:
                        l: 0
                        x: 0
                        y: 0
                        r: 0
                        t: 1
                        b: 1
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0    # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 0.5
                    sparkline:
                      animate: true
                      show:
                        chart_type: equalizer #trafficlight
                        fill: false    # fade, none
                        points: false
                      state_values:
                        logarithmic: false #true Does NOT work with equalizer!!!!
                        value_factor: 1000
                        lower_bound: 50
                      x_lines:
                        lines:
                          - name: x_axis
                            zpos: below 
                            yshift: 37
                          - name: ticks
                            zpos: below 
                            yshift: 38
                      equalizer:
                        line_width : 1
                        column_spacing: 1
                        value_buckets: 12
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red
                      styles:
                        x_axis:
                          stroke: lightgray
                          stroke-width: 0.2rem
                        ticks:
                          stroke: lightgray
                          stroke-dasharray: 1, 118.5
                          stroke-dashoffset: 0
                          stroke-width: 1rem
                        equalizer_part:
                          transition: fill 2s ease
                          transform-origin: center
                          transform-box: fill-box
                          transform: skewY(10deg)

    - type: grid
      columns: 1
      square: false
      cards:
        # x.4 ============================================================
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              name: 'Total Electricity'
          aspectratio: 4/1
          layout:
            styles:
              card:
            toolsets:
              # ===============================================================
              - toolset: graph-phase-total
                position:
                  cx: 115
                  cy: 47.5
                  rotate: 90
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position:
                      cx: 50
                      cy: 70
                      width: 35
                      height: 140
                      radius:
                        all: 1
                    styles:
                      rectex:
                        fill: var(--theme-sys-elevation-surface-neutral9)
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position:
                      cx: 50
                      cy: 70
                      width: 25
                      height: 130
                      margin:
                        l: 0
                        x: 0
                        y: 0
                        r: 0
                        t: 5
                        b: 35
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                      graded:
                        line_width : 0.5
                        row_spacing: 3
                      colorstops_transition: hard
                      colorstops:
                      # 10 steps green to red
                      # '#009344', 3ca444, 7bb741, b5ca3c
                      # ebda4a, e7bc3d, dc993e
                      # d2773d, c9563f, be343e
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 0.150
                            color: 'green'
                          - value: 0.300
                            color: '#FFE37F'  # Yasmine
                          - value: 0.500
                            color: '#FCC449'  # Saffron
                          - value: 1.000
                            color: '#F79F23'  # Orange Peel
                          - value: 1.500
                            color: '#EF7F01'  # Tangerine
                          - value: 2.000
                            color: '#E73F10'  # Cinnabar
                          - value: 2.500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3.000
                            color: '#980C0C'  # Pennu Red
                          - value: 4.000
                            color: '#7B0002'  # Barn Red
                      styles:
                        # tool:
                        #   transform: rotate(90deg)
                        graded_background:
                          transition: fill 2s ease
                          transform-origin: center
                          transform-box: fill-box
                          transform: skewY(20deg)
                        graded_foreground:
                          transition: fill 2s ease
                          transform-origin: center
                          transform-box: fill-box
                          transform: skewY(20deg)
              # ===============================================================
              - toolset: graph-phase-state
                position:
                  cx: 45
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: name
                    position:
                      cx: 190
                      cy: 35
                    entity_indexes:
                      - entity_index: 0
                    styles:
                      tool:
                      name:
                        text-anchor: end
                        font-size: 12em
                        font-weight: 600
                        opacity: 0.8
                        fill: var(--primary-text-color)
                        transition: opacity 0.5s linear
                  # ------------------------------------------------------------
                  - type: circle
                    position:
                      cx: 50
                      cy: 50
                      radius: 32.5      # subtract stroke-width / 2
                    styles:
                      circle:
                        stroke-width: 5em
                        stroke: var(--theme-sys-elevation-surface-neutral9)
                        fill: var(--primary-background-color)
                  # ------------------------------------------------------------
                  - type: icon
                    position:
                      cx: 50
                      cy: 32.5
                      align: center
                      icon_size: 20
                    entity_index: 0

                  # ------------------------------------------------------------
                  - type: state
                    position:
                      cx: 50
                      cy: 52.5
                    entity_indexes:
                      - entity_index: 0
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state:
                        text-anchor: middle
                        font-size: 16em
                        font-weight: 600
                        # fill: var(--primary-background-color)
                        transition: opacity 0.5s linear
              # ===============================================================
              - toolset: graph-phase-state
                position:
                  cx: 300
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 180
                      height: 70
                      margin:
                        l: 0
                        x: 0
                        y: 0
                        r: 0
                        t: 0
                        b: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0    # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 2
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: stalagmites
                      state_values:
                        logarithmic: false #true Does NOT work with equalizer!!!!
                        value_factor: 1000
                        lower_bound: 50
                      x_lines:
                        lines:
                          - name: center
                            zpos: above
                            yshift: 0
                      barcode:
                        column_spacing: -3
                        row_spacing: 0.01
                        line_width: 0.01
                      # column_spacing: 4
                      # line_width : 1  # To prevent two colors around zero y axis
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red
                      styles:
                        # centerbg:
                        #   stroke: var(--ha-card-background,var(--card-background-color,#fff))
                        #   stroke-width: 1rem
                        center:
                          stroke: var(--theme-sys-elevation-surface-neutral4)
                          stroke-width: 0.1rem
                          stroke-dasharray: 5 2.5
                          stroke-dashoffset: 0.2
                        barcode_graph:
                          transition: fill 2s ease
                          transform-origin: bottom
                          transform-box: fill-box
                          transform: skewX(-10deg)

    - type: grid
      columns: 1
      square: false
      cards:
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_score
              name: 'Score'
              area: 'Study'
            - entity: sensor.awair_element_study_temperature
              name: 'Temp'
              area: 'Study'
            - entity: sensor.awair_element_study_humidity
              name: 'Humidity'
              area: 'Study'
              decimals: 0
            - entity: sensor.awair_element_study_carbon_dioxide
              name: 'CO2'
              area: 'Study'
            - entity: sensor.awair_element_study_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Study'
            - entity: sensor.awair_element_study_pm2_5
              name: 'PM2.5'
              area: 'Study'
          aspectratio: 3/3.45
          layout:
            styles:
              card:
            toolsets:
              # ===============================================================
              - toolset: graph-title-and-location
                position:
                  cx: 15
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: text
                    position:
                      cx: 50
                      cy: 30
                    text: "Today's AQI"
                    styles:
                      text:
                        text-anchor: start
                        font-size: 15em
                        font-weight: 400
                        opacity: 0.7
                  # ------------------------------------------------------------
                  - type: area
                    position:
                      cx: 50
                      cy: 50
                    entity_indexes:
                      - entity_index: 0
                    styles:
                      tool:
                      area:
                        text-anchor: start
                        font-size: 20em
                        font-weight: 600
                        fill: var(--primary-text-color)

              # ===============================================================
              - toolset: graph-score-arc-state
                position:
                  cx: 150
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: circle
                    position:
                      cx: 50
                      cy: 50
                      radius: 28
                    entity_index: 0
                    styles:
                      circle:
                        fill: var(--primary-background-color)
                    animations:
                      - state: '60'
                        operator: <=
                        styles:
                          circle:
                            fill: '#e63740'
                      - state: '80'
                        operator: <=
                        styles:
                          circle:
                            fill: '#fb8600'
                      - state: '100'
                        operator: <=
                        styles:
                          circle:
                            fill: '#49ce4c'
                  # ------------------------------------------------------------
                  - type: 'segarc'
                    entity_index: 0
                    position:
                      cx: 50
                      cy: 50
                      start_angle: 0
                      end_angle: 360
                      width: 3
                      radius: 35
                    scale:
                      min: 0
                      max: 100
                    show:
                      scale: false
                      style: 'colorstops'
                      lastcolor: true
                    segments:
                      colorstops:
                        gap: 0
                        colors:
                          00: '#e63740'
                          60: '#fb8600'
                          80: '#49ce4c'
                    styles:
                      foreground:
                        fill: var(--theme-gradient-color-02)
                      background:
                        fill: var(--primary-background-color)
                  # ------------------------------------------------------------
                  - type: state
                    position:
                      cx: 50
                      cy: 50
                    entity_indexes:
                      - entity_index: 0
                    show:
                      uom: none
                    styles:
                      tool:
                      state:
                        text-anchor: middle
                        font-size: 25em
                        font-weight: 400
                        fill: var(--primary-background-color)
                        transition: opacity 0.5s linear

              # ===============================================================
              - toolset: graph-score-area
                position:
                  cx: 150
                  cy: 120
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position:
                      cx: 50
                      cy: 54
                      width: 270
                      height: 50
                      margin:
                        l: 0
                        x: 0
                        y: 0
                        r: 0
                        t: 0
                        b: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 1
                    sparkline:
                      animate: true
                      show:
                        chart_type: area
                        fill: fade
                      state_values:
                        aggregate_func: avg
                      area: 
                        fill: fade
                      x_lines:
                        lines:
                          - name: x_axis
                            zpos: below 
                            yshift: 27
                          - name: ticks
                            zpos: below 
                            yshift: 28
                      line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#e63740'
                            # Just an idea to have colors for fill and stroke
                            # if absent, color is used!
                            fill: '#e63740'
                            stroke: '#e63740'
                            rank: 2
                          - value: 61
                            color: '#fb8600'
                            rank: 1
                          - value: 81
                            color: '#49ce4c'
                            rank: 0
                      styles:
                        tool:
                          opacity: 0.5
                        x_axis:
                          stroke: lightgray
                          stroke-width: 0.2rem
                        ticks:
                          stroke: lightgray
                          stroke-dasharray: 1, 118.5
                          stroke-dashoffset: 0
                          stroke-width: 1.5rem

              # ===============================================================
              - toolset: graph-sensors-text-divider
                position:
                  cx: 15
                  cy: 200
                tools:
                  # ------------------------------------------------------------
                  - type: text
                    position:
                      cx: 50
                      cy: 20
                    text: "Sensors with actual state and average per 30 minutes"
                    styles:
                      text:
                        text-anchor: start
                        font-size: 11em
                        font-weight: 400
                        opacity: 0.7

              # ===============================================================
              - toolset: graph-sensor-temp
                position:
                  cx: 40
                  cy: &sensor_cy 220
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position: &rectex_pos
                      cx: 50
                      cy: 55
                      width: 20
                      height: 70
                      radius:
                        all: 10
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position: &graph_pos
                      cx: 50
                      cy: 55
                      width: 10
                      height: 60
                      margin: 0
                    entity_index: 1
                    entity_indexes:
                      - entity_index: 1
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                        chart_variant: rank_order
                      state_values:
                        aggregate_func: last
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1000
                            color: '#e63740'
                            rank: 4
                          - value:  9
                            color: '#fb8600'
                            rank: 3
                          - value: 11
                            color: '#faaa00'
                            rank: 2
                          - value: 17
                            color: '#fdd125'
                            rank: 1
                          - value: 18
                            color: '#49ce4c'
                            rank: 0
                          - value: 25
                            color: '#fdd125'
                            rank: 1
                          - value: 26
                            color: '#faaa00'
                            rank: 2
                          - value: 31
                            color: '#fb8600'
                            rank: 3
                          - value: 33
                            color: '#e63740'
                            rank: 4
                      styles: &trafficlight_styles
                        graded_background:
                          transition: fill 2s ease
                          rx: 50%
                          fill: none
                        graded_foreground:
                          transition: fill 2s ease
                          rx: 50%
                          fill: none
                  # ------------------------------------------------------------
                  - type: name
                    position:
                      cx: 50
                      cy: &cy_name 100
                    entity_indexes:
                      - entity_index: 1
                    styles:
                      tool:
                      name: &name_styling
                        text-anchor: middle
                        font-size: 10em
                        font-weight: 500
                        opacity: 0.6
                        fill: var(--primary-text-color)
                        transition: opacity 0.5s linear
                  # ------------------------------------------------------------
                  - type: state
                    position:
                      cx: 50
                      cy: &cy_state 120
                    entity_indexes:
                      - entity_index: 1
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state: &state_settings
                        text-anchor: middle
                        font-size: 12em
                        font-weight: 600
                        fill: var(--primary-text-color)
                        transition: opacity 0.5s linear
                        alignment-baseline: middle 
                      uom: &uom_settings
                        opacity: 1
                        fill: var(--primary-text-color)
                        font-weight: 400
                        transition: opacity 0.5s linear
                        alignment-baseline: hanging

                  # ------------------------------------------------------------
                  - type: sparkline
                    position: &audio_pos
                      cx: 50
                      cy: 155
                      width: 40
                      height: 20
                      margin:
                        x: 0
                        y: 0
                    entity_index: 1
                    entity_indexes:
                      - entity_index: 1
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 1
                        group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      state_values:
                        aggregate_func: avg
                        use_value: bin
                        lower_bound: -1
                        upper_bound: 4
                      barcode:
                        line_width : 0.1
                        colum_spacing: 4
                      x_lines:
                        lines:
                          - name: center
                            zpos: below 
                            yshift: 0
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1000
                            color: '#e63740'
                            rank: 4
                          - value:  9
                            color: '#fb8600'
                            rank: 3
                          - value: 11
                            color: '#faaa00'
                            rank: 2
                          - value: 17
                            color: '#fdd125'
                            rank: 1
                          - value: 18
                            color: '#49ce4c'
                            rank: 0
                          - value: 25
                            color: '#fdd125'
                            rank: 1
                          - value: 26
                            color: '#faaa00'
                            rank: 2
                          - value: 31
                            color: '#fb8600'
                            rank: 3
                          - value: 33
                            color: '#e63740'
                            rank: 4
                      styles:
                        center:
                          stroke: lightgray
                          stroke-width: 0.1rem
                          stroke-dasharray: 5 2.5
                          stroke-dashoffset: 0.2
                        barcode_graph: &timeline_graph_styles
                          opacity: 0.6

              # ===============================================================
              - toolset: graph-sensor-humi-90deg
                position:
                  cx: 95
                  cy: *sensor_cy
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position: *rectex_pos
                  # ------------------------------------------------------------
                  - type: sparkline
                    position: *graph_pos
                    entity_index: 2
                    entity_indexes:
                      - entity_index: 2
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                        chart_variant: rank_order
                      state_values:
                        aggregate_func: last
                        # fixed_value: true
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#e63740'
                            rank: 4
                          - value: 15.50
                            color: '#fb8600'
                            rank: 3
                          - value: 20.9509
                            color: '#faaa00'
                            rank: 2
                          - value: 35.50
                            color: '#fdd125'
                            rank: 1
                          - value: 39.50
                            color: '#49ce4c'
                            rank: 0
                          - value: 49.50
                            color: '#fdd125'
                            rank: 1
                          - value: 59.50
                            color: '#faaa00'
                            rank: 2
                          - value: 64.50
                            color: '#fb8600'
                            rank: 3
                          - value: 79.50
                            color: '#e63740'
                            rank: 4
                      styles: *trafficlight_styles
                  # ------------------------------------------------------------
                  - type: name
                    position:
                      cx: 50
                      cy: *cy_name
                    entity_indexes:
                      - entity_index: 2
                    styles:
                      tool:
                      name: *name_styling
                  # ------------------------------------------------------------
                  - type: state
                    position:
                      cx: 50
                      cy: *cy_state
                    entity_indexes:
                      - entity_index: 2
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state: *state_settings
                      uom: *uom_settings
                  # ------------------------------------------------------------
                  - type: sparkline
                    position: *audio_pos
                    entity_index: 2
                    entity_indexes:
                      - entity_index: 2
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 1
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      state_values:
                        aggregate_func: avg
                        use_value: bin
                        lower_bound: -1
                        upper_bound: 4
                      barcode: 
                        line_width : 0.1
                        column_spacing: 1
                      x_lines:
                        lines:
                          - name: center
                            zpos: below 
                            yshift: 0
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: '#e63740'
                            rank: 4
                          - value: 15.50
                            color: '#fb8600'
                            rank: 3
                          - value: 20.50
                            color: '#faaa00'
                            rank: 2
                          - value: 35.50
                            color: '#fdd125'
                            rank: 1
                          - value: 39.50
                            color: '#49ce4c'
                            rank: 0
                          - value: 49.50
                            color: '#fdd125'
                            rank: 1
                          - value: 59.50
                            color: '#faaa00'
                            rank: 2
                          - value: 64.50
                            color: '#fb8600'
                            rank: 3
                          - value: 79.50
                            color: '#e63740'
                            rank: 4
                      styles:
                        center:
                          stroke: lightgray
                          stroke-width: 0.1rem
                          stroke-dasharray: 5 2.5
                          stroke-dashoffset: 0.2
                        barcode_graph: *timeline_graph_styles

              # ===============================================================
              - toolset: graph-sensor-co2
                position:
                  cx: 150
                  cy: *sensor_cy
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position: *rectex_pos
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position: *graph_pos
                    entity_index: 3
                    entity_indexes:
                      - entity_index: 3
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                        # fixed_value: true
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#49ce4c'
                            rank: 0
                          - value: 600
                            color: '#fdd125'
                            rank: 1
                          - value: 1000
                            color: '#faaa00'
                            rank: 2
                          - value: 1500
                            color: '#fb8600'
                            rank: 3
                          - value: 2500
                            color: '#e63740'
                            rank: 4
                      styles: *trafficlight_styles

                  # ------------------------------------------------------------
                  - type: name
                    position:
                      cx: 50
                      cy: *cy_name
                    entity_indexes:
                      - entity_index: 3
                    styles:
                      tool:
                      name: *name_styling

                  # ------------------------------------------------------------
                  - type: state
                    position:
                      cx: 50
                      cy: *cy_state
                    entity_indexes:
                      - entity_index: 3
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state: *state_settings
                      uom: *uom_settings
                  # ------------------------------------------------------------
                  - type: sparkline
                    position: *audio_pos
                    entity_index: 3
                    entity_indexes:
                      - entity_index: 3
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 1
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      state_values:
                        aggregate_func: avg
                      barcode:
                        line_width : 0.1
                        column_spacing: 1
                      x_lines:
                        lines:
                          - name: center
                            zpos: below 
                            yshift: 0
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#49ce4c'
                            rank: 0
                          - value: 600
                            color: '#fdd125'
                            rank: 1
                          - value: 1000
                            color: '#faaa00'
                            rank: 2
                          - value: 1500
                            color: '#fb8600'
                            rank: 3
                          - value: 2500
                            color: '#e63740'
                            rank: 4
                      styles:
                        center:
                          stroke: lightgray
                          stroke-width: 0.1rem
                          stroke-dasharray: 5 2.5
                          stroke-dashoffset: 0.2
                        barcode_graph: *timeline_graph_styles

              # ===============================================================
              - toolset: graph-sensor-voc
                position:
                  cx: 205
                  cy: *sensor_cy
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position: *rectex_pos
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position: *graph_pos
                    entity_index: 4
                    entity_indexes:
                      - entity_index: 4
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                        # fixed_value: true
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#49ce4c'
                            rank: 0
                          - value: 333
                            color: '#fdd125'
                            rank: 1
                          - value: 1000
                            color: '#faaa00'
                            rank: 2
                          - value: 3333
                            color: '#fb8600'
                            rank: 3
                          - value: 8332
                            color: '#e63740'
                            rank: 4
                      styles: *trafficlight_styles
                  # ------------------------------------------------------------
                  - type: name
                    position:
                      cx: 50
                      cy: *cy_name
                    entity_indexes:
                      - entity_index: 4
                    styles:
                      tool:
                      name: *name_styling

                  # ------------------------------------------------------------
                  - type: state
                    position:
                      cx: 50
                      cy: *cy_state
                    entity_indexes:
                      - entity_index: 4
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state: *state_settings
                      uom: *uom_settings
                  # ------------------------------------------------------------
                  - type: sparkline
                    position: *audio_pos
                    entity_index: 4
                    entity_indexes:
                      - entity_index: 4
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 1
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      state_values:
                        aggregate_func: avg
                      barcode:
                        line_width : 0.1
                        column_spacing: 1
                      x_lines:
                        lines:
                          - name: center
                            zpos: below 
                            yshift: 0
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#49ce4c'
                            rank: 0
                          - value: 333
                            color: '#fdd125'
                            rank: 1
                          - value: 1000
                            color: '#faaa00'
                            rank: 2
                          - value: 3333
                            color: '#fb8600'
                            rank: 3
                          - value: 8332
                            color: '#e63740'
                            rank: 4
                      styles:
                        center:
                          stroke: lightgray
                          stroke-width: 0.1rem
                          stroke-dasharray: 5 2.5
                          stroke-dashoffset: 0.2
                        barcode_graph: *timeline_graph_styles

              # ===============================================================
              - toolset: graph-sensor-pm25
                position:
                  cx: 260
                  cy: *sensor_cy
                tools:
                  # ------------------------------------------------------------
                  - type: rectex
                    position: *rectex_pos
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position: *graph_pos
                    entity_index: 5
                    entity_indexes:
                      - entity_index: 5
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      state_values:
                        aggregate_func: last
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#49ce4c'
                            rank: 0
                          - value: 15
                            color: '#fdd125'
                            rank: 1
                          - value: 35
                            color: '#faaa00'
                            rank: 2
                          - value: 55
                            color: '#fb8600'
                            rank: 3
                          - value: 75
                            color: '#e63740'
                            rank: 4
                      styles: *trafficlight_styles
                  # ------------------------------------------------------------
                  - type: name
                    position:
                      cx: 50
                      cy: *cy_name
                    entity_indexes:
                      - entity_index: 5
                    styles:
                      tool:
                      name: *name_styling
                  # ------------------------------------------------------------
                  - type: state
                    position:
                      cx: 50
                      cy: *cy_state
                    entity_indexes:
                      - entity_index: 5
                    show:
                      uom: bottom
                    styles:
                      tool:
                      state: *state_settings
                      uom: *uom_settings
                  # ------------------------------------------------------------
                  - type: sparkline
                    position: *audio_pos
                    entity_index: 5
                    entity_indexes:
                      - entity_index: 5
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 1
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      state_values:
                        aggregate_func: avg
                      barcode:
                        line_width : 0.1
                        column_spacing: 1
                      x_lines:
                        lines:
                          - name: center
                            zpos: below 
                            yshift: 0
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#49ce4c'
                            rank: 0
                          - value: 15
                            color: '#fdd125'
                            rank: 1
                          - value: 35
                            color: '#faaa00'
                            rank: 2
                          - value: 55
                            color: '#fb8600'
                            rank: 3
                          - value: 75
                            color: '#e63740'
                            rank: 4
                      styles:
                        center:
                          stroke: lightgray
                          stroke-width: 0.1rem
                          stroke-dasharray: 5 2.5
                          stroke-dashoffset: 0.2
                        barcode_graph: *timeline_graph_styles

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_score
              name: 'Score'
              area: 'Study'
            - entity: sensor.awair_element_study_temperature
              name: 'Temp'
              area: 'Study'
            - entity: sensor.awair_element_study_humidity
              name: 'Humidity'
              area: 'Study'
              decimals: 0
            - entity: sensor.awair_element_study_carbon_dioxide
              name: 'CO2'
              area: 'Study'
            - entity: sensor.awair_element_study_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Study'
            - entity: sensor.awair_element_study_pm2_5
              name: 'PM2.5'
              area: 'Study'
          layout:
            template:
              name: sak_layout_fce2_awair1c


        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_score
              name: 'Score'
              area: 'Study'
            - entity: sensor.awair_element_study_temperature
              name: 'Temp'
              area: 'Study'
            - entity: sensor.awair_element_study_humidity
              name: 'Humidity'
              area: 'Study'
              decimals: 0
            - entity: sensor.awair_element_study_carbon_dioxide
              name: 'CO2'
              area: 'Study'
            - entity: sensor.awair_element_study_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Study'
            - entity: sensor.awair_element_study_pm2_5
              name: 'PM2.5'
              area: 'Study'
          layout:
            template:
              name: sak_layout_fce2_awair1b

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_score
              name: 'Score'
              area: 'Study'
            - entity: sensor.awair_element_study_temperature
              name: 'Temp'
              area: 'Study'
            - entity: sensor.awair_element_study_humidity
              name: 'Humidity'
              area: 'Study'
              decimals: 0
            - entity: sensor.awair_element_study_carbon_dioxide
              name: 'CO2'
              area: 'Study'
            - entity: sensor.awair_element_study_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Study'
            - entity: sensor.awair_element_study_pm2_5
              name: 'PM2.5'
              area: 'Study'
          layout:
            template:
              name: sak_layout_fce2_awair1a

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_bedroom_score
              name: 'Score'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_temperature
              name: 'Temp'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_humidity
              name: 'Humidity'
              area: 'Bedroom'
              decimals: 0
            - entity: sensor.awair_element_bedroom_carbon_dioxide
              name: 'CO2'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_pm2_5
              name: 'PM2.5'
              area: 'Bedroom'
          layout:
            template:
              name: sak_layout_fce2_awair1a

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_bedroom_score
              name: 'Score'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_temperature
              name: 'Temp'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_humidity
              name: 'Humidity'
              area: 'Bedroom'
              decimals: 0
            - entity: sensor.awair_element_bedroom_carbon_dioxide
              name: 'CO2'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Bedroom'
            - entity: sensor.awair_element_bedroom_pm2_5
              name: 'PM2.5'
              area: 'Bedroom'
          layout:
            template:
              name: sak_layout_fce2_awair1c

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_livingroom_score
              name: 'Score'
              area: 'Living'
            - entity: sensor.awair_element_livingroom_temperature
              name: 'Temp'
              area: 'Living'
            - entity: sensor.awair_element_livingroom_humidity
              name: 'Humidity'
              area: 'Living'
              decimals: 0
            - entity: sensor.awair_element_livingroom_carbon_dioxide
              name: 'CO2'
              area: 'Living'
            - entity: sensor.awair_element_livingroom_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Living'
            - entity: sensor.awair_element_livingroom_pm2_5
              name: 'PM2.5'
              area: 'Living'
          layout:
            template:
              name: sak_layout_fce2_awair1a

        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_livingroom_score
              name: 'Score'
              area: 'Living'
            - entity: sensor.awair_element_livingroom_temperature
              name: 'Temp'
              area: 'Living'
            - entity: sensor.awair_element_livingroom_humidity
              name: 'Humidity'
              area: 'Living'
              decimals: 0
            - entity: sensor.awair_element_livingroom_carbon_dioxide
              name: 'CO2'
              area: 'Living'
            - entity: sensor.awair_element_livingroom_volatile_organic_compounds
              name: 'Chemicals'
              area: 'Living'
            - entity: sensor.awair_element_livingroom_pm2_5
              name: 'PM2.5'
              area: 'Living'
          layout:
            template:
              name: sak_layout_fce2_awair1c

    - type: grid
      columns: 1
      square: false
      cards:
        # yesterday.1 #############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              
          aspectratio: 3/1  # Big card with graph!!
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 150
                      cy: 47
                      width: 280
                      height: 90 # things are still wrong with min/max... for audio variant
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: -1    # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      barcode:
                        line_width: 0.1
                        column_spacing: 1
                      state_values:
                        logarithmic: true
                        value_factor: 1000
                        aggregate_func: avg
                        # lower_bound: 10 #~0.1
                      x_lines:
                        lines:
                          - name: center
                            zpos: below 
                            yshift: 0
                          - name: x_axis
                            zpos: below 
                            yshift: 47
                          - name: ticks   # Should be named ticks!! major/minor...
                            zpos: below 
                            yshift: 49
                        numbers:
                          yshift: 50
                          start:
                            name: first
                          end: 
                            name: last 
                          inbetween:
                            name: inbetween
                            interval: 2
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red
                      styles:
                        center:
                          stroke: lightgray
                          stroke-width: 0.1rem
                          stroke-dasharray: 5 2.5
                          stroke-dashoffset: 0.2
                        x_axis:
                          stroke: lightgray
                          stroke-width: 0.2rem
                        ticks:
                          stroke: lightgray
                          stroke-dasharray: 0.5, 119.4
                          stroke-dashoffset: 0.2
                          stroke-width: 1.0rem

    - type: grid
      columns: 1
      square: false
      cards:
        # today.1 #############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              
          aspectratio: 3/1  # Big card with graph!!
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 150
                      cy: 47
                      width: 280
                      height: 90 # things are still wrong with min/max... for audio variant
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      barcode:
                        line_width: 0.1
                        column_spacing: 1
                        # group_by: date
                      state_values:
                        logarithmic: true
                        value_factor: 1000
                        aggregate_func: avg
                        # lower_bound: 10 #~0.1
                      x_lines:
                        lines:
                          - name: center
                            zpos: below 
                            yshift: 0
                          - name: x_axis
                            zpos: below 
                            yshift: 47
                          - name: ticks   # Should be named ticks!! major/minor...
                            zpos: below 
                            yshift: 49
                        numbers:
                          yshift: 50
                          start:
                            name: first
                          end: 
                            name: last 
                          inbetween:
                            name: inbetween
                            interval: 2
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red
                      styles:
                        center:
                          stroke: lightgray
                          stroke-width: 0.1rem
                          stroke-dasharray: 5 2.5
                          stroke-dashoffset: 0.2
                        x_axis:
                          stroke: lightgray
                          stroke-width: 0.2rem
                        ticks:
                          stroke: lightgray
                          stroke-dasharray: 0.5, 119.4
                          stroke-dashoffset: 0.2
                          stroke-width: 1.0rem

    - type: grid
      columns: 3
      square: false
      cards:
        # gauge.1 #############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 95
                      height: 90 # things are still wrong with min/max... for audio variant
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      barcode:
                        line_width: 0.1
                        column_spacing: 1
                      state_values:                      
                        logarithmic: true
                        value_factor: 1000
                        aggregate_func: avg
                        # lower_bound: 0 #~0.1
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red

        # gauge.2 #############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: binary_sensor.livingroom_movement_occupancy
            - entity: sensor.tomorrow_io_zoefdehaas_tree_pollen_index
            - entity: sensor.tomorrow_io_zoefdehaas_grass_pollen_index
            - entity: sensor.tomorrow_io_zoefdehaas_weed_pollen_index
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 20
                      width: 80
                      height: 10
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                      state_values:
                        aggregate_func: max
                        lower_bound: -2
                      barcode:
                        line_width: 0.5
                        column_spacing: 1
                      state_map:
                        map:
                          - value: very_high
                          - value: 'off'
                          - value: 'on'
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: 'lightgray'
                          - value: 1
                            color: 'blue'
                          - value: 2
                            color: 'purple'

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 80
                      height: 10
                      margin:
                        x: 0
                        y: 0
                    entity_index: 1
                    entity_indexes:
                      - entity_index: 1
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      state_values:
                        aggregate_func: max
                        lower_bound: -1
                      barcode:
                        line_width : 0.1
                        column_spacing: 1
                      state_map:
                        template: 
                          name: sak_statemap_pollen
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1
                            color: '#848484'
                          - value: 0.00
                            color: '#ffe99d'
                          - value: 1.00
                            color: '#fcc449'
                          - value: 2.00
                            color: '#f79f23'
                          - value: 3.00
                            color: '#ef7f01'
                          - value: 4.00
                            color: '#e73f10'

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 80
                      width: 80
                      height: 10
                      margin:
                        x: 0
                        y: 0
                    entity_index: 2
                    entity_indexes:
                      - entity_index: 2
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                      state_values:
                        aggregate_func: avg
                        lower_bound: -1
                      barcode:
                        line_width : 0.1
                        column_spacing: 1
                      state_map:
                        template: 
                          name: sak_statemap_pollen
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1
                            color: '#848484'
                          - value: 0.00
                            color: '#ffe99d'
                          - value: 1.00
                            color: '#fcc449'
                          - value: 2.00
                            color: '#f79f23'
                          - value: 3.00
                            color: '#ef7f01'
                          - value: 4.00
                            color: '#e73f10'

        # gauge.3 #############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: binary_sensor.livingroom_movement_occupancy
            - entity: sensor.tomorrow_io_zoefdehaas_tree_pollen_index
            - entity: sensor.tomorrow_io_zoefdehaas_grass_pollen_index
            - entity: sensor.tomorrow_io_zoefdehaas_weed_pollen_index
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 20
                      width: 80
                      height: 20
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                        chart_variant: audio
                      state_values:
                        aggregate_func: max
                        lower_bound: -1
                      barcode:
                        line_width: 0
                        column_spacing: 1
                      state_map:
                          template: 
                            name: sak_statemap_pollen
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1
                            color: '#848484'
                          - value: 0.00
                            color: '#ffe99d'
                          - value: 1.00
                            color: '#fcc449'
                          - value: 2.00
                            color: '#f79f23'
                          - value: 3.00
                            color: '#ef7f01'
                          - value: 4.00
                            color: '#e73f10'
                          - value: 5
                            color: 'lightgray'
                          - value: 6
                            color: 'blue'
                          - value: 7
                            color: 'purple'

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 80
                      height: 20
                      margin:
                        x: 0
                        y: 0
                    entity_index: 1
                    entity_indexes:
                      - entity_index: 1
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                      state_values:
                        # aggregate_func: avg
                        lower_bound: -1
                      barcode:
                        line_width : 0.1
                        column_spacing: 1
                      state_map:
                        template: 
                          name: sak_statemap_pollen
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1
                            color: '#848484'
                          - value: 0.00
                            color: '#ffe99d'
                          - value: 1.00
                            color: '#fcc449'
                          - value: 2.00
                            color: '#f79f23'
                          - value: 3.00
                            color: '#ef7f01'
                          - value: 4.00
                            color: '#e73f10'

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 80
                      width: 80
                      height: 20
                      margin:
                        x: 0
                        y: 0
                    entity_index: 2
                    entity_indexes:
                      - entity_index: 2
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: barcode
                      state_values:
                        # aggregate_func: avg
                        lower_bound: -1
                      barcode:
                        line_width : 0.1
                        column_spacing: 1
                      state_map:
                        template: 
                          name: sak_statemap_pollen
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1
                            color: '#848484'
                          - value: 0.00
                            color: '#ffe99d'
                          - value: 1.00
                            color: '#fcc449'
                          - value: 2.00
                            color: '#f79f23'
                          - value: 3.00
                            color: '#ef7f01'
                          - value: 4.00
                            color: '#e73f10'

    - type: grid
      columns: 3
      square: false
      cards:
        # clock.1a ############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 80
                      height: 80
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: radial_barcode
                        chart_variant: sunburst
                      state_values:
                        # aggregate_func: avg
                        logarithmic: true 
                        value_factor: 1000
                        lower_bound: 0
                      radial_barcode:
                        size: 5
                        line_width : 1.5
                        column_spacing: 0.1
                        face:
                          show_day_night: true
                          show_hour_marks: true 
                          show_hour_numbers: absolute # or relative
                          day_night_radius: 27
                          hour_marks_radius: 23
                          hour_marks_count: 24    # one mark for each hour
                          hour_numbers_radius: 18
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 67
                      height: 67
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:                      
                      animate: true
                      show:
                        chart_type: radial_barcode
                        chart_variant: sunburst
                      state_values:
                        logarithmic: true 
                        value_factor: 1000
                        lower_bound: 0
                        aggregate_func: min
                      radial_barcode:
                        line_width : 1.5
                        column_spacing: 1
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 93
                      height: 93
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0

                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 4
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: radial_barcode
                        chart_variant: sunburst
                      state_values:
                        logarithmic: true 
                        value_factor: 1000
                        lower_bound: 10
                        aggregate_func: max
                      radial_barcode:
                        line_width : 1.5
                        column_spacing: 1
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red

        # clock.2 ###########################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            # - entity: sensor.u_s_air_quality_index
            - entity: sensor.dsmr_reading_electricity_currently_delivered

          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 95
                      height: 95
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 4
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: line
                        fill: false    # fade, none
                        points: false
                      state_values:
                        logarithmic: true 
                        value_factor: 1000
                      line:
                        line_width : 1.5  # To prevent two colors around zero y axis
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red

        # clock.3 ############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.dsmr_reading_electricity_currently_delivered
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 90
                      height: 90
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 4
                    sparkline:
                      animate: true
                      show:
                        chart_type: radial_barcode
                        chart_variant: sunburst_outward
                        chart_viz: rice_grain

                      state_values:
                        logarithmic: true
                        value_factor: 1000
                        lower_bound: 50
                        aggregate_func: avg
                      radial_barcode:
                        size: 44
                        line_width : 0.5
                        face:
                          show_day_night: false
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: 'darkgreen'
                          - value: 150
                            color: 'green'
                          - value: 300
                            color: '#FFE37F'  # Yasmine
                          - value: 500
                            color: '#FCC449'  # Saffron
                          - value: 1000
                            color: '#F79F23'  # Orange Peel
                          - value: 1500
                            color: '#EF7F01'  # Tangerine
                          - value: 2000
                            color: '#E73F10'  # Cinnabar
                          - value: 2500
                            color: '#BB1B1B'  # Cornell Red
                          - value: 3000
                            color: '#980C0C'  # Pennu Red
                          - value: 4000
                            color: '#7B0002'  # Barn Red
                      styles:
                        radial_barcode_face_hour_marks:
                          stroke-width: 2em
                          stroke-dasharray: 0.05 0.95
                          stroke-dashoffset: 0.025
                        clock_background:
                          fill: var(--ha-card-background,var(--card-background-color,#fff))

    - type: grid
      columns: 3
      square: false
      cards:
        # sunburst.1 ##########################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: binary_sensor.livingroom_movement_occupancy
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 80
                      height: 80
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 1
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: radial_barcode
                        chart_variant: sunburst_outward
                      state_values:
                        aggregate_func: max
                        lower_bound: -2
                      radial_barcode:
                        size: 15
                        line_width : 0.1
                        column_spacing: 5
                        face:
                          show_day_night: false
                          show_hour_marks: false 
                          show_hour_numbers: none # absolute # or relative
                          hour_marks_radius: 23
                          hour_marks_count: 12   # one mark for each hour
                          hour_numbers_radius: 18
                      state_map:
                        map:
                          - value: dummy
                          - value: 'off'
                          - value: 'on'
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: 'lightgray'
                          - value: 1
                            color: 'blue'
                          - value: 2
                            color: 'purple'

        # sunburst.2 ##########################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.tomorrow_io_zoefdehaas_tree_pollen_index
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
            debug: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 80
                      height: 80
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 1
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: radial_barcode
                        chart_variant: sunburst_inward
                        chart_viz: flower2
                      state_values:
                        aggregate_func: max
                        lower_bound: -1
                      radial_barcode:
                        size: 15
                        line_width : 0.1
                        column_spacing: 1
                        face:
                          show_day_night: false
                          show_hour_marks: false 
                          show_hour_numbers: none # absolute # or relative
                          hour_marks_radius: 23
                          hour_marks_count: 12   # one mark for each hour
                          hour_numbers_radius: 18
                      state_map:
                        template: 
                          name: sak_statemap_pollen
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1
                            color: '#848484'
                          - value: 0.01
                            color: '#ffe99d'
                          - value: 1.01
                            color: '#fcc449'
                          - value: 2.01
                            color: '#f79f23'
                          - value: 3.01
                            color: '#ef7f01'
                          - value: 4.01
                            color: '#e73f10'

        # sunburst.3 ##########################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.tomorrow_io_zoefdehaas_grass_pollen_index
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 80
                      height: 80
                      margin:
                        x: 0
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day   # hour
                        offset: 0     # 0 for today, -1 for yesterday!
                        duration:
                          hour: 24    # Add or not???
                        bins:
                          per_hour: 1
                      group_by: date
                    sparkline:
                      animate: true
                      show:
                        chart_type: radial_barcode
                        chart_variant: sunburst_outward
                        chart_viz: rice_grain
                      state_values:
                        aggregate_func: max
                        lower_bound: -1
                      radial_barcode:
                        size: 15
                        line_width : 0.1
                        face:
                          show_day_night: false
                          show_hour_marks: false 
                          show_hour_numbers: none # absolute # or relative
                          hour_marks_radius: 23
                          hour_marks_count: 12   # one mark for each hour
                          hour_numbers_radius: 18
                      line_width : 0.1
                      column_spacing: 1
                      state_map:
                        template: 
                          name: sak_statemap_pollen
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1
                            color: '#848484'
                          - value: 0.00
                            color: '#ffe99d'
                          - value: 1.00
                            color: '#fcc449'
                          - value: 2.00
                            color: '#f79f23'
                          - value: 3.00
                            color: '#ef7f01'
                          - value: 4.00
                            color: '#e73f10'


    - type: grid
      columns: 3
      square: false
      cards:
        # traffic_light.1 ######################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 80
                      width: 100
                      height: 25
                      margin:
                        x: 5
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                      graded:
                        square: true
                        line_width : 0.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#A8E05F'
                          - value: 51
                            color: '#FDD74B'
                          - value: 101
                            color: '#FE9B57'
                          - value: 151
                            color: '#FE6A69'
                          - value: 201
                            color: '#A97ABC'
                          - value: 301
                            color: '#A87383'

        # traffic_light.2 ######################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_temperature
              name: 'Awair Temp Study'
              area: 'Tha Moon'
              show_graph: true
            - entity: sensor.awair_element_bedroom_temperature
              name: 'Awair Temp Bedroom'
              area: 'Tha Moon'
              show_graph: true
            - entity: sensor.awair_element_livingroom_temperature
              name: 'Awair Temp Living'
              area: 'Tha Moon'
              show_graph: true
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 15
                      width: 100
                      height: 15
                      margin:
                        x: 5
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      calendar:
                        period: day
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 0.5
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                        chart_variant: rank_order
                      state_values:
                        aggregate_func: avg
                      graded:
                        square: true
                        line_width : 1.5
                        column_spacing: 1
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1000
                            color: '#e63740'
                            rank: 4
                          - value:  9
                            color: '#fb8600'
                            rank: 3
                          - value: 11
                            color: '#faaa00'
                            rank: 2
                          - value: 17
                            color: '#fdd125'
                            rank: 1
                          - value: 18
                            color: '#49ce4c'
                            rank: 0
                          - value: 25
                            color: '#fdd125'
                            rank: 1
                          - value: 26
                            color: '#faaa00'
                            rank: 2
                          - value: 31
                            color: '#fb8600'
                            rank: 3
                          - value: 33
                            color: '#e63740'
                            rank: 4

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position:
                      cx: 50
                      cy: 50
                      width: 100
                      height: 15
                      margin:
                        x: 5
                        y: 0
                    entity_index: 1
                    entity_indexes:
                      - entity_index: 1
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 0.5
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                        chart_variant: rank_order
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1000
                            color: '#e63740'
                            rank: 4
                          - value:  9
                            color: '#fb8600'
                            rank: 3
                          - value: 11
                            color: '#faaa00'
                            rank: 2
                          - value: 17
                            color: '#fdd125'
                            rank: 1
                          - value: 18
                            color: '#49ce4c'
                            rank: 0
                          - value: 25
                            color: '#fdd125'
                            rank: 1
                          - value: 26
                            color: '#faaa00'
                            rank: 2
                          - value: 31
                            color: '#fb8600'
                            rank: 3
                          - value: 33
                            color: '#e63740'
                            rank: 4


                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position:
                      cx: 50
                      cy: 85
                      width: 100
                      height: 15
                      margin:
                        x: 5
                        y: 0
                    entity_index: 2
                    entity_indexes:
                      - entity_index: 2
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 0.5
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                        chart_variant: rank_order
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -1000
                            color: '#e63740'
                            rank: 4
                          - value:  9
                            color: '#fb8600'
                            rank: 3
                          - value: 11
                            color: '#faaa00'
                            rank: 2
                          - value: 17
                            color: '#fdd125'
                            rank: 1
                          - value: 18
                            color: '#49ce4c'
                            rank: 0
                          - value: 25
                            color: '#fdd125'
                            rank: 1
                          - value: 26
                            color: '#faaa00'
                            rank: 2
                          - value: 31
                            color: '#fb8600'
                            rank: 3
                          - value: 33
                            color: '#e63740'
                            rank: 4


        # traffic_light.3 ######################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.awair_element_study_humidity
              name: 'Awair Temp Study'
              area: 'Tha Moon'
              show_graph: true
            - entity: sensor.awair_element_bedroom_humidity
              name: 'Awair Temp Bedroom'
              area: 'Tha Moon'
              show_graph: true
            - entity: sensor.awair_element_livingroom_humidity
              name: 'Awair Temp Living'
              area: 'Tha Moon'
              show_graph: true
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 15
                      width: 100
                      height: 15
                      margin:
                        x: 5
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 1
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                        chart_variant: rank_order
                      state_values:
                        aggregate_func: last
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#e63740' #'#A97ABC' OK
                            rank: 4
                          - value: 15
                            color: '#fb8600' #'#FE6A69'
                            rank: 3
                          - value: 20
                            color: '#faaa00' #'#FE9B57' OK
                            rank: 2
                          - value: 35
                            color: '#fdd125' #'#FDD74B' OK
                            rank: 1
                          - value: 40
                            color: '#49ce4c' #'#A8E05F' OK
                            rank: 0
                          - value: 50
                            color: '#fdd125' #'#FDD74B' OK
                            rank: 1
                          - value: 60
                            color: '#faaa00' #'#FE9B57' OK
                            rank: 2
                          - value: 65
                            color: '#fb8600' #'#FE6A69'
                            rank: 3
                          - value: 80
                            color: '#e63740' #'#A97ABC' OK
                            rank: 4


                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position:
                      cx: 50
                      cy: 50
                      width: 100
                      height: 15
                      margin:
                        x: 5
                        y: 0
                    entity_index: 1
                    entity_indexes:
                      - entity_index: 1
                    period:
                      real_time: true
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                        chart_variant: rank_order
                      state_values:
                        aggregate_func: last
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#e63740' #'#A97ABC' OK
                            rank: 4
                          - value: 15
                            color: '#fb8600' #'#FE6A69'
                            rank: 3
                          - value: 20
                            color: '#faaa00' #'#FE9B57' OK
                            rank: 2
                          - value: 35
                            color: '#fdd125' #'#FDD74B' OK
                            rank: 1
                          - value: 40
                            color: '#49ce4c' #'#A8E05F' OK
                            rank: 0
                          - value: 50
                            color: '#fdd125' #'#FDD74B' OK
                            rank: 1
                          - value: 60
                            color: '#faaa00' #'#FE9B57' OK
                            rank: 2
                          - value: 65
                            color: '#fb8600' #'#FE6A69'
                            rank: 3
                          - value: 80
                            color: '#e63740' #'#A97ABC' OK
                            rank: 4

                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 2
                    position:
                      cx: 50
                      cy: 85
                      width: 100
                      height: 15
                      margin:
                        x: 5
                        y: 0
                    entity_index: 2
                    entity_indexes:
                      - entity_index: 2
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 0.5
                    sparkline:
                      animate: true
                      show:
                        chart_type: graded
                        chart_variant: rank_order
                      graded:
                        square: true
                        line_width : 1.5
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#e63740' #'#A97ABC' OK
                            rank: 4
                          - value: 15
                            color: '#fb8600' #'#FE6A69'
                            rank: 3
                          - value: 20
                            color: '#faaa00' #'#FE9B57' OK
                            rank: 2
                          - value: 35
                            color: '#fdd125' #'#FDD74B' OK
                            rank: 1
                          - value: 40
                            color: '#49ce4c' #'#A8E05F' OK
                            rank: 0
                          - value: 50
                            color: '#fdd125' #'#FDD74B' OK
                            rank: 1
                          - value: 60
                            color: '#faaa00' #'#FE9B57' OK
                            rank: 2
                          - value: 65
                            color: '#fb8600' #'#FE6A69'
                            rank: 3
                          - value: 80
                            color: '#e63740' #'#A97ABC' OK
                            rank: 4

    - type: grid
      columns: 3
      square: false
      cards:
        # neg/pos 0.1 ###########################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: true
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 80
                      width: 100
                      height: 38
                      margin:
                        x: 5
                        y: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 0.5
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: bar    # line and dots are ok with marginx/y. Now the bars!!
                        fill: fade    # fade, none
                        points: true
                      bar:
                        line_width : 0.1  # To prevent two colors around zero y axis
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -50
                            # color: '#2683fe' # blue
                            color: var(--theme-sys-elevation-surface-neutral10)
                          - value: 0
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-elevation-surface-neutral7)
                            # color: '#2683fe' # blue
                          - value: 160
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-elevation-surface-neutral5)
                      # Just exploring styles
                      styles:
                        bar_mask_above:
                          fill: url(#sak-sparkline-bar-mask-tb-80)
                          stroke: url(#sak-sparkline-bar-mask-tb-80)
                        bar_mask_below:
                          fill: url(#sak-sparkline-bar-mask-bt-80)
                          # fill: '#2222'
                        0: 
                          bar_mask_pos:
                            fill: url(#somegradient)
                          bar_mask_neg:
                            fill: url(#someothergradient)
                          area_mask_pos:
                            fill: url(#somegradient)
                          area_mask_neg:
                            fill: url(#somegradient)
                          area_background:
                            fill: red
                          bar_background:
                            # Yep, via pattern def:
                            # https://stackoverflow.com/questions/3796025/fill-svg-path-element-with-a-background-image
                            fill: url(#somecolors-or-picture-file-possible)

              - toolset: graph-top
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 20
                      width: 100
                      height: 38
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: area
                        # fill: fade    # fade, none
                        # points: false
                      area: 
                        fill: fade
                        show_dots: false
                        show_line: true
                        show_minmax: true
                      line_width : 0.2  # To prevent two colors around zero y axis
                      # line_width : 2  # To prevent two colors around zero y axis
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -50
                            # color: '#2683fe' # blue
                            color: var(--theme-sys-elevation-surface-neutral10)
                          - value: 0
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-elevation-surface-neutral7)
                            # color: '#2683fe' # blue
                          - value: 160
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-elevation-surface-neutral5)
                                                    # stroke:  var(--theme-sys-palette-secondary60)

                      # Just exploring styles
                      styles:
                        area_mask_above:
                          fill: url(#sak-sparkline-area-mask-tb-3)
                        area_mask_below:
                          # fill: url(#sak-sparkline-area-mask-tb-0)
                          fill: '#222'
        # neg/pos 0.2 ###########################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: true
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 80
                      width: 100
                      height: 38
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: bar
                        fill: fade    # fade, none
                        points: false
                      bar:
                        line_width : 0.2  # To prevent two colors around zero y axis
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -50
                            # color: '#2683fe' # blue
                            color: var(--theme-sys-palette-primary20)
                          - value: 0
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-primary40)
                            # color: '#2683fe' # blue
                          - value: 160
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-primary60)
                      styles:
                        bar_mask_above:
                          fill: url(#sak-sparkline-bar-mask-tb-100)
                        bar_mask_below:
                          # fill: url(#sak-sparkline-bar-mask-tb-60)
                          fill: url(#sak-sparkline-bar-mask-bt-100)

              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 20
                      width: 100
                      height: 38
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: bar
                        fill: false    # fade, none
                        points: false
                      bar:
                        line_width : 0.2  # To prevent two colors around zero y axis
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -50
                            # color: '#2683fe' # blue
                            color: var(--theme-sys-palette-secondary10)
                          - value: 0
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-secondary40)
                            # color: '#2683fe' # blue
                          - value: 160
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-secondary70)


        # neg/pos 0.3 ###########################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            # - entity: sensor.u_s_air_quality_index
            - entity: sensor.dsmr_reading_electricity_currently_delivered

            # - entity: light.1st_floor_hall_light
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
              fixed_value: false

          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: false
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 80
                      width: 100
                      height: 40
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 96
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: line
                        fill: false    # fade, none
                        points: false
                      line:
                        show_dots: false
                        show_minmax: true
                        line_width : 0.2  # To prevent two colors around zero y axis
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -50
                            # color: '#2683fe' # blue
                            color: var(--theme-sys-palette-secondary10)
                          - value: 0
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-secondary40)
                            # color: '#2683fe' # blue
                          - value: 160
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-secondary70)


              - toolset: graph
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 80
                      width: 100
                      height: 40
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 96
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: bar
                        fill: none    # fade, none
                        points: false
                      bar:
                        line_width : 0.2  # To prevent two colors around zero y axis
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -50
                            # color: '#2683fe' # blue
                            color: var(--theme-sys-palette-secondary10)
                          - value: 0
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-secondary40)
                            # color: '#2683fe' # blue
                          - value: 160
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-secondary70)


              - toolset: graph-upper
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 30
                      width: 100
                      height: 48
                      margin: 1
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 4
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: line
                        fill: false    # fade, none
                        points: false
                      line:
                        show_dots: false
                        show_minmax: true
                        line_width : 1  # To prevent two colors around zero y axis
                      state_values:
                        fixed_value: true
                        aggregate_func: avg
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: -50
                            # color: '#2683fe' # blue
                            color: var(--theme-sys-palette-secondary10)
                          - value: 0
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-secondary40)
                            # color: '#2683fe' # blue
                          - value: 160
                            # color: '#EB46A1' # pink
                            color: var(--theme-sys-palette-secondary70)


    - type: grid
      columns: 3
      square: false
      cards:
        # bars.0.1 ##############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
            # - entity: sensor.dsmr_reading_electricity_currently_delivered
              
          aspectratio: 1/1                          # Card is 100x100 grid
          dev:
            fakeData: true
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph-bottom
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      orientation: horizontal
                      cx: 50
                      cy: 80
                      width: 100
                      height: 38
                      margin: 1
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                      # - entity_index: 1
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: area
                        fill: fade    # fade, none
                        points: true
                      area: 
                        fill: fade
                        show_line: true 
                        show_dots: true 
                        line_width : 0.2  # To prevent two colors around zero y axis
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: -50
                            color: var(--theme-sys-palette-secondary10)
                          - value: 0
                            color: var(--theme-sys-palette-secondary40)
                          - value: 160
                            color: var(--theme-sys-palette-secondary70)


              - toolset: graph-top
                position:
                  cx: 50
                  cy: 50
                  scale_y: -1
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 20
                      width: 100
                      height: 40
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: bar
                        fill: none    # fade, none
                        points: true
                      bar:
                        line_width : 0.3
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          # From the example, pink to blue
                          - value: -50
                            color: var(--theme-sys-palette-secondary10)
                          - value: 0
                            color: var(--theme-sys-palette-secondary40)
                          - value: 160
                            color: var(--theme-sys-palette-secondary70)


        # bars.0.2 ##############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
          dev:
            fakeData: false              
          aspectratio: 1/1                          # Card is 100x100 grid
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph-test
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 50
                      cy: 50
                      width: 100
                      height: 100
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    animate: false
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline:
                      # For current history fetching
                      show:
                        chart_type: equalizer
                        fill: false    # fade, none
                        points: false
                      equalizer:
                        column_spacing: 4
                        line_width : 0.3
                        value_buckets: 40 # was 13
                      colorstops_transition: hard
                      colorstops:
                        colors:
                          - value: 0
                            color: '#A8E05F'
                          - value: 51
                            color: '#FDD74B'
                          - value: 101
                            color: '#FE9B57'
                          - value: 151
                            color: '#FE6A69'
                          - value: 201
                            color: '#A97ABC'
                          - value: 301
                            color: '#A87383'
                      styles:
                        bar_mask_above:
                          fill: url(#sak-sparkline-bar-mask-tb-80)
                          stroke: url(#sak-sparkline-bar-mask-tb-80)
                        bar_mask_below:
                          fill: url(#sak-sparkline-bar-mask-bt-80)

        # bars.0.3 ##############################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
              
          aspectratio: 1/1                          # Card is 100x100 grid
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph-left
                position:
                  cx: 50
                  cy: 50
                  rotate: -90
                  scale_x: -1
                  scale_y: -1
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      orientation: horizontal
                      cx: 20
                      cy: 50
                      width: 100
                      height: 40
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline:
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: bar
                        fill: none    # fade, none
                        points: true
                      bar:
                        line_width : 0
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: -50
                            color: var(--theme-sys-palette-secondary10)
                          - value: 0
                            color: var(--theme-sys-palette-secondary40)
                          - value: 160
                            color: var(--theme-sys-palette-secondary70)


              - toolset: graph-right
                position:
                  cx: 50
                  cy: 50
                  scale_y: -1
                  rotate: 90
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      cx: 80
                      cy: 50
                      width: 100
                      height: 40
                      margin: 0
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline: 
                      animate: true
                      # For current history fetching
                      show:
                        chart_type: bar
                        fill: none    # fade, none
                        points: true
                      bar:
                        line_width : 0
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: -50
                            color: var(--theme-sys-palette-secondary10)
                          - value: 0
                            color: var(--theme-sys-palette-secondary40)
                          - value: 160
                            color: var(--theme-sys-palette-secondary70)


    - type: grid
      columns: 3
      square: false
      cards:
        # 0.1 ###################################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
              
          aspectratio: 1/1                          # Card is 100x100 grid
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph-test
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      orientation: horizontal
                      cx: 50
                      cy: 50
                      width: 100
                      height: 100
                      margin:
                        l: 1
                        x: 1
                        y: 0
                        r: 1
                        t: 2
                        b: 50
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                    sparkline:
                      show:
                        chart_type: area
                        fill: fade
                      area: 
                        line_width : 3
                        show_line: true
                        fill: fade
        # 0.2 ###################################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
              
          aspectratio: 1/1                          # Card is 100x100 grid
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph-test
                position:
                  cx: 50
                  cy: 50
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      orientation: horizontal
                      cx: 50
                      cy: 80
                      width: 100
                      height: 40
                      margin:
                        l: 0
                        x: 0
                        y: 0
                        r: 0
                        t: 0
                        b: 2
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    expose_entities:
                      - min: sak_sensor.graph_0_min
                      - max: sak_sensor.graph_0_max
                      - avg: sak_sensor.graph_0_avg
                    period:
                      rolling_window:
                        duration:
                          hour: 168
                        bins: 
                          per_hour: 1
                    sparkline:
                      show:
                        chart_type: line
                        fill: false
                        points: true
                      line:
                        show_dots: true
                        line_width : 1
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: '#A8E05F'
                          - value: 51
                            color: '#FDD74B'
                          - value: 101
                            color: '#FE9B57'
                          - value: 151
                            color: '#FE6A69'
                          - value: 201
                            color: '#A97ABC'
                          - value: 301
                            color: '#A87383'

        # 0.3 ###################################################################
        - type: 'custom:swiss-army-knife-card'
          entities:
            - entity: sensor.u_s_air_quality_index
              name: 'Air quality'
              area: 'Tha Moon'
              show_graph: true
              
          aspectratio: 1/1                          # Card is 100x100 grid
          layout:
            styles:
              card:
            toolsets:
              - toolset: graph-test
                position:
                  cx: 50      # was 50. Height is 50, so cx: 25 ?? YEP !!!!!!
                  cy: 50
                  # rotate: 90  # rotate 90 degrees. How to shift to left side??
                  # scale_y: 1
                tools:
                  # ------------------------------------------------------------
                  - type: sparkline
                    id: 1
                    position:
                      orientation: horizontal
                      cx: 50
                      cy: 75
                      width: 100
                      height: 50
                      margin: 2
                    entity_index: 0
                    entity_indexes:
                      - entity_index: 0
                    expose_entities:
                      - min: sak_sensor.graph_0_min
                      - max: sak_sensor.graph_0_max
                      - avg: sak_sensor.graph_0_avg
                    period:
                      rolling_window:
                        duration:
                          hour: 24
                        bins: 
                          per_hour: 1
                      # hours_to_show: 24
                      # bins_per_hour: 1
                    sparkline:
                      show:
                        chart_type: dots
                        points: true
                      dots: 
                        line_width : 1
                      # For current history fetching
                      colorstops_transition: smooth
                      colorstops:
                        colors:
                          - value: 0
                            color: '#A8E05F'
                          - value: 51
                            color: '#FDD74B'
                          - value: 101
                            color: '#FE9B57'
                          - value: 151
                            color: '#FE6A69'
                          - value: 201
                            color: '#A97ABC'
                          - value: 301
                            color: '#A87383'
      # ========================================================================
